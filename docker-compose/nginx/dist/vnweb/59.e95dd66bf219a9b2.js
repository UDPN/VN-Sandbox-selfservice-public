"use strict";(self.webpackChunkudpn_tem2=self.webpackChunkudpn_tem2||[]).push([[59],{8059:(P,d,i)=>{i.r(d),i.d(d,{TodoListModule:()=>F});var u=i(9808),l=i(5089),c=i(2192),t=i(5e3),h=i(4004);let m=(()=>{class e{}return e.todolist="v1/udpn/member/to/do/list/manage/searchs",e})();var v=i(520);let g=(()=>{class e{constructor(o){this.http=o}fetchList(o){return this.http.post(m.todolist,{inPage:o.inPage||{pageSize:10,pageNum:1}}).pipe((0,h.U)(r=>r))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(v.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var f=i(6852),T=i(72),L=i(6661),S=i(7464),C=i(1062);function b(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"a",3),t.NdJ("click",function(){const a=t.CHM(o).data;return t.oxw().onVote(a.voteUrl,a.voteUrlParams,a.toDoCode)}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.TgZ(5,"span",4),t._uU(6,"|"),t.qZA(),t.TgZ(7,"div",2),t.TgZ(8,"a",5),t.NdJ("click",function(){const a=t.CHM(o).data;return t.oxw().onDetail(a.detailUrl,a.detailUrlParams,a.toDoCode)}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"vote")),t.xp6(6),t.Oqu(t.lcZ(10,4,"detail")))}const A=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class e{constructor(o,s,r,a,p){this.todoListService=o,this.sharedService=s,this.router=r,this.spinner=a,this.store=p,this.app_title="todo-list.list.title",this.snapFilter=this.sharedService.getSnapFilter||{}}ngOnInit(){this.loadService(this.snapFilter)}loadService(o){this.subscription=this.todoListService.fetchList(o).subscribe(s=>{this.dataSource=s.data,this.total=s.resultPageInfo.total,this.pagedata=[{tag:"todo-list.list.proposalCode",colunm:"toDoCode",colunmData:"toDoCode"},{tag:"todo-list.list.proposalType",colunm:"toDoType",colunmData:"toDoType",pip:"todoType"},{tag:"todo-list.list.submissionTime",colunm:"toDoSubmitTime",colunmData:"toDoSubmitTime",pip:"date"},{tag:"todo-list.list.status",colunm:"toDoStatus",colunmData:"toDoStatus",pip:"voteResult"},{tag:"todo-list.list.action",colunm:"Action"}]})}onVote(o,s,r){s=s.slice(7),this.store.dispatch(new c.A({voteId:s,proposalCode:r})).subscribe(a=>{this.router.navigate("/dashboard/voting-proposal/NetworkMemberProposalVote"===o?["/home/proposal/network/vote"]:"/dashboard/voting-proposal/AllianceMemberProposalVote"===o?["/home/proposal/aliance/vote"]:"/dashboard/voting-proposal/TnNodeBusinessProposalVote"===o?["/home/proposal/tnNode/vote"]:"/dashboard/voting-proposal/ServiceFeeProposalVote"===o?["/home/proposal/service/vote"]:["/home/proposal/threshold/vote"])})}onDetail(o,s,r){s=s.slice(7),this.store.dispatch(new c.A({voteId:s,proposalCode:r})).subscribe(a=>{this.router.navigate("/dashboard/voting-proposal/NetworkMemberProposalInfo"===o?["/home/proposal/network/info"]:"/dashboard/voting-proposal/AllianceMemberProposalInfo"===o?["/home/proposal/aliance/info"]:"/dashboard/voting-proposal/TnNodeBusinessProposalInfo"===o?["/home/proposal/tnNode/info"]:"/dashboard/voting-proposal/ServiceFeeProposalInfo"===o?["/home/proposal/service/info"]:["/home/proposal/threshold/info"])})}fetchAll(o){this.snapFilter=Object.assign(Object.assign({},this.snapFilter),o),this.loadService(this.snapFilter)}ngOnDestroy(){var o;null===(o=this.subscription)||void 0===o||o.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(g),t.Y36(f.F),t.Y36(l.F0),t.Y36(T.t2),t.Y36(L.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:2,vars:4,consts:[[3,"title","dataSource","pagedata","t","toParentOk"],[1,"flex"],[1,"c-btn"],[1,"text-blue-900","font-semibold",3,"click"],[1,"mr-4"],[1,"text-yellow-500","font-semibold",3,"click"]],template:function(o,s){1&o&&(t.TgZ(0,"app-udpn-list",0),t.NdJ("toParentOk",function(a){return s.fetchAll(a)}),t.YNc(1,b,11,6,"ng-template"),t.qZA()),2&o&&t.Q6J("title",s.app_title)("dataSource",s.dataSource)("pagedata",s.pagedata)("t",s.total)},directives:[S.p],pipes:[C.X$],styles:[""]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(A)],l.Bz]}),e})();var y=i(3767);let F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[y.m,u.ez,D]]}),e})()}}]);