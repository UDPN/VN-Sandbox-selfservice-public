"use strict";(self.webpackChunkudpn_tem2=self.webpackChunkudpn_tem2||[]).push([[469],{2201:(P,h,l)=>{l.d(h,{k:()=>A});var g=l(8776),a=l(5e3),T=l(2290),f=l(7423),y=l(5245),C=l(9772),_=l(1062);const p=["upFile"];let A=(()=>{class u extends g.fS{constructor(r){super(),this.toastr=r}uploadFile(r){"text/plain"===r.target.files[0].type?new Promise((c,b)=>{const v=new FileReader;v.onload=()=>{v.result?c(v.result.toString()):this.showErrors("file content is empty!")},v.readAsText(r.target.files[0],"utf-8")}).then(c=>{if(this.fileDom.nativeElement.value="",this.isJSON(c)){this.model.Document=c;var b=JSON.parse(c),v=JSON.stringify(b,void 0,4);this.form.get("udpnDidDocument").setValue(v)}else this.showErrors("File format error!")}):this.showErrors("File format error!")}isJSON(r){if("string"==typeof r){const m=JSON.parse(r);return!("object"!=typeof m||!m)}return!1}showErrors(r){this.toastr.error(r,"error",{positionClass:"toast-bottom-center",progressBar:!0,progressAnimation:"decreasing"})}}return u.\u0275fac=function(r){return new(r||u)(a.Y36(T._W))},u.\u0275cmp=a.Xpm({type:u,selectors:[["formly-button"]],viewQuery:function(r,m){if(1&r&&a.Gf(p,5),2&r){let c;a.iGM(c=a.CRH())&&(m.fileDom=c.first)}},features:[a.qOj],decls:8,vars:6,consts:[["mat-stroked-button","","color","primary","type","button",1,"-mt-4",2,"width","100px","height","40px",3,"click"],["type","file","accept",".txt","hidden","",3,"change"],["upFile",""],["matTooltipPosition","right",2,"color","#333333ad","font-size","20px",3,"matTooltip"]],template:function(r,m){if(1&r){const c=a.EpF();a.TgZ(0,"button",0),a.NdJ("click",function(){return a.CHM(c),a.MAs(4).click()}),a._uU(1),a.ALo(2,"translate"),a.qZA(),a.TgZ(3,"input",1,2),a.NdJ("change",function(v){return m.uploadFile(v)}),a.qZA(),a.TgZ(5,"mat-icon",3),a.ALo(6,"translate"),a._uU(7,"help"),a.qZA()}2&r&&(a.xp6(1),a.Oqu(a.lcZ(2,2,"browse")),a.xp6(4),a.Q6J("matTooltip",a.lcZ(6,4,"onlineHelp.node")))},directives:[f.lW,y.Hw,C.gM],pipes:[_.X$],encapsulation:2}),u})()},1237:(P,h,l)=>{l.d(h,{X:()=>_});var g=l(8776),a=l(5e3),T=l(1062),f=l(3954),y=l(9808);function C(p,A){1&p&&(a.TgZ(0,"span",5),a._uU(1,"*"),a.qZA())}let _=(()=>{class p extends g.n2{constructor(u){super(),this.translate=u}}return p.\u0275fac=function(u){return new(u||p)(a.Y36(T.sK))},p.\u0275cmp=a.Xpm({type:p,selectors:[["formly-wrapper-panel"]],features:[a.qOj],decls:9,vars:5,consts:[["cols","4","gutterSize","0.8rem",3,"rowHeight"],[1,"font-sans","text-sm","-mt-4","whitespace-nowrap","text-right","font-bold"],["class","text-red-600",4,"ngIf"],["colspan","3"],["fieldComponent",""],[1,"text-red-600"]],template:function(u,d){1&u&&(a.TgZ(0,"mat-grid-list",0),a.TgZ(1,"mat-grid-tile"),a.TgZ(2,"div",1),a.YNc(3,C,2,0,"span",2),a.ALo(4,"translate"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"mat-grid-tile",3),a.GkF(7,null,4),a.qZA(),a.qZA()),2&u&&(a.Q6J("rowHeight",d.to.height||"70px"),a.xp6(3),a.Q6J("ngIf",d.to.required&&d.to.label!==a.lcZ(4,3,"unionist.public.nodeCode")),a.xp6(2),a.hij("",d.to.label," "))},directives:[f.Il,f.DX,y.O5],pipes:[T.X$],encapsulation:2}),p})()},6556:(P,h,l)=>{function g(a){return{validationMessages:[{name:"required",message:(T,f)=>a.stream("formly.required",{label:`${f.templateOptions.label||f.templateOptions.labels}`})}]}}l.d(h,{R:()=>g})},469:(P,h,l)=>{l.r(h),l.d(h,{VnNodeModule:()=>rt});var g=l(9808),a=l(3767),T=l(7322),f=l(8776),y=l(1062),C=l(1237),_=l(6556),p=l(4975),A=l(2201),u=l(8009),d=l(5089),r=l(655),m=l(3075),c=l(6661),b=l(8746);class v{constructor(){this.statusObjVnSw={1:"Pending",2:"TN1 processing",3:"TN1  successfully",4:"TN1 failprocesseded",5:"TN2 processing",6:"TN2 processed successfully",7:"TN2 failed",8:"Refunding",9:"Refund successful",10:"Refund failed",11:"Revoke sucessful"},this.statusObjVnTr={1:"Pending",2:"TN1 processing",3:"TN1  successfully",4:"TN1 failprocesseded",8:"Refunding",9:"Refund successful",10:"Refund failed",11:"Revoke sucessful"},this.statusObjBnTr={1:"Pending",2:"TN1 processing",3:"TN1  successfully",4:"TN1 failprocesseded",8:"Refunding",9:"Refund successful",10:"Refund failed",11:"Revoke sucessful",2e3:"local init",2005:"submited vn"},this.statusObjBnSw={1:"Pending",2:"TN1 processing",3:"TN1  successfully",4:"TN1 failprocesseded",5:"TN2 processing",6:"TN2 processed successfully",7:"TN2 failed",8:"Refunding",9:"Refund successful",10:"Refund failed",11:"Revoke sucessful",2e3:"local init",2005:"submited vn"}}doData(s){return s.hasOwnProperty("transType")?(this.data=s.outTransactionHistoryList,0===this.data.length?[]:this.setData("Transfer"===s.transType?this.statusObjBnTr:this.statusObjBnSw)):(this.data=s.details,0===this.data.length?[]:this.setData(1===s.transactionType?this.statusObjVnTr:this.statusObjVnSw))}setData(s){let e=[];for(let n in s)e.push({key:this.data[0].transactionKey,status:this.data.some(o=>o.historyStatus==n)?this.data.find(o=>o.historyStatus==n).historyStatus:n,date:this.data.some(o=>o.historyStatus==n)?this.data.find(o=>o.historyStatus==n).receivedDate:"--",color:this.setNodeColor(n),is:this.setNodeIs(n),fee:this.data.some(o=>o.historyStatus==n)?this.data.find(o=>o.historyStatus==n).transactionFee:"--"});return e}setNodeIs(s){return!!this.data.some(n=>n.historyStatus==s)||!["4","7","8","9","10","11"].includes(s.toString())}setNodeColor(s){return!this.data.some(e=>"4"==e.historyStatus)&&!this.data.some(e=>"7"==e.historyStatus)||"4"!=s&&"7"!=s?this.data.some(e=>e.historyStatus==s)?1:3:2}}var F=l(4842),t=l(5e3),O=l(72),q=l(4004);let S=(()=>{class i{}return i.list="v1/udpn/transaction/swap/manage/all/transaction/searches",i.currencyList="v1/udpn/control/vote/proposal/manage/business/all/currency/type/list",i.platfromList="v1/udpn/control/vote/proposal/manage/business/all/platform/type/list",i.info="v1/udpn/transaction/swap/manage/all/transaction/detail",i})();var w=l(520);let D=(()=>{class i{constructor(e){this.http=e}list(e){return this.http.post(S.list,{did:e.did||"",fromCurrencyType:e.fromCurrencyType||"",fromPlatformType:e.fromPlatformType||"",instance:e.instance||"",nodeCode:e.nodeCode||"",status:e.status||"",submitEndDate:e.endDate||"",submitStartDate:e.startDate||"",toCurrencyType:e.toCurrencyType||"",toPlatformType:e.toPlatformType||"",transactionKey:e.transactionKey||"",transactionType:e.transactionType||"",inPage:e.inPage||{pageSize:10,pageNum:1}}).pipe((0,q.U)(o=>o))}getPlatm(){return this.http.post(S.platfromList,{}).pipe((0,q.U)(e=>e))}getCurry(){return this.http.post(S.currencyList,{}).pipe((0,q.U)(e=>e))}info(e){return this.http.post(S.info,{transactionKey:e.transactionKey,transactionType:e.transactionType}).pipe((0,q.U)(o=>o))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(w.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var J=l(827),K=l(7423),M=l(3508);function Q(i,s){1&i&&t._UZ(0,"div",44)}function V(i,s){1&i&&(t.TgZ(0,"div",45),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div"),t._uU(5,"(#3)"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"vnNode.list.exceptionHandling")))}function B(i,s){1&i&&t._UZ(0,"div",44)}function j(i,s){1&i&&(t.TgZ(0,"div",46),t._UZ(1,"div",41),t.TgZ(2,"div",47),t.TgZ(3,"span"),t._uU(4,"End"),t.qZA(),t.qZA(),t.qZA())}function Y(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"vnNode.list.transactionFee"),"",(null==e.timeLineList[2]?null:e.timeLineList[2].fee)+("--"===(null==e.timeLineList[2]?null:e.timeLineList[2].fee)||null===(null==e.timeLineList[2]?null:e.timeLineList[2].fee)?"":e.type)," ")}}function R(i,s){1&i&&t._UZ(0,"div",44)}function W(i,s){if(1&i&&(t.TgZ(0,"div",45),t.TgZ(1,"div"),t._uU(2),t.ALo(3,"vnStatus"),t.qZA(),t.TgZ(4,"div"),t._uU(5,"(#5)"),t.qZA(),t.qZA()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,1,null==e.timeLineList[6]?null:e.timeLineList[6].status))}}function X(i,s){1&i&&t._UZ(0,"div",44)}function z(i,s){1&i&&(t.TgZ(0,"div",46),t._UZ(1,"div",41),t.TgZ(2,"div",14),t.TgZ(3,"span"),t._uU(4,"End"),t.qZA(),t.qZA(),t.qZA())}function H(i,s){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"vnNode.list.transactionFee"),"",(null==e.timeLineList[5]?null:e.timeLineList[5].fee)+("--"===(null==e.timeLineList[5]?null:e.timeLineList[5].fee)||null===(null==e.timeLineList[5]?null:e.timeLineList[5].fee)?"":e.type)," ")}}const L=function(i){return{points:i}},E=function(i){return{ml:i}},U=function(i){return{"time-card-gray":i}};function G(i,s){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"div",36),t.TgZ(2,"div",27),t.TgZ(3,"div",28),t.TgZ(4,"div",25),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.ALo(10,"translate"),t.ALo(11,"vnStatus"),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"div",29),t._UZ(16,"img",30),t.TgZ(17,"span",22),t._UZ(18,"div",31),t.qZA(),t.qZA(),t.TgZ(19,"div",17),t.TgZ(20,"div",32),t.TgZ(21,"div"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div"),t._uU(25,"(#4)"),t.qZA(),t.qZA(),t.YNc(26,R,1,0,"div",48),t.YNc(27,W,6,3,"div",34),t.YNc(28,X,1,0,"div",48),t.YNc(29,z,5,0,"div",35),t.qZA(),t.qZA(),t._UZ(30,"div",36),t.TgZ(31,"div",16),t.TgZ(32,"div",17),t.TgZ(33,"div",18),t.TgZ(34,"div",49),t.TgZ(35,"div"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"div"),t._uU(39,"(#5)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",20),t._UZ(41,"img",30),t.TgZ(42,"span",25),t._UZ(43,"div",23),t.qZA(),t.qZA(),t.TgZ(44,"div",24),t.TgZ(45,"div",25),t.TgZ(46,"div"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"div"),t._uU(50),t.ALo(51,"translate"),t.ALo(52,"vnStatus"),t.qZA(),t.TgZ(53,"div"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.YNc(56,H,3,4,"div",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(46,L,3===(null==e.timeLineList[4]?null:e.timeLineList[4].color))),t.xp6(5),t.AsE(" ",t.lcZ(7,26,"vnNode.list.txnId"),"",null==e.timeLineList[4]?null:e.timeLineList[4].key," "),t.xp6(3),t.AsE(" ",t.lcZ(10,28,"vnNode.list.txnState"),"",t.lcZ(11,30,null==e.timeLineList[4]?null:e.timeLineList[4].status)," "),t.xp6(4),t.AsE(" ",t.lcZ(14,32,"vnNode.list.receivedTime"),"",null==e.timeLineList[4]?null:e.timeLineList[4].date," "),t.xp6(2),t.Q6J("ngClass",t.VKq(48,L,3===(null==e.timeLineList[4]?null:e.timeLineList[4].color))),t.xp6(3),t.Q6J("ngClass",t.VKq(50,E,null==e.timeLineList[6]?null:e.timeLineList[6].is)),t.xp6(2),t.Q6J("ngClass",t.VKq(52,U,3===(null==e.timeLineList[4]?null:e.timeLineList[4].color))),t.xp6(2),t.Oqu(t.lcZ(23,34,"vnNode.list.tn2Processing")),t.xp6(4),t.Q6J("ngIf",null==e.timeLineList[6]?null:e.timeLineList[6].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[6]?null:e.timeLineList[6].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[6]?null:e.timeLineList[6].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[6]?null:e.timeLineList[6].is),t.xp6(1),t.Q6J("ngClass",t.VKq(54,L,3===(null==e.timeLineList[5]?null:e.timeLineList[5].color))),t.xp6(4),t.Q6J("ngClass",t.VKq(56,U,3===(null==e.timeLineList[5]?null:e.timeLineList[5].color))),t.xp6(2),t.Oqu(t.lcZ(37,36,"vnNode.list.tn2ProcessSuccess")),t.xp6(4),t.Q6J("ngClass",t.VKq(58,L,3===(null==e.timeLineList[5]?null:e.timeLineList[5].color))),t.xp6(7),t.AsE(" ",t.lcZ(48,38,"vnNode.list.txnId"),"",null==e.timeLineList[5]?null:e.timeLineList[5].key," "),t.xp6(3),t.AsE(" ",t.lcZ(51,40,"vnNode.list.txnState"),"",t.lcZ(52,42,null==e.timeLineList[5]?null:e.timeLineList[5].status)," "),t.xp6(4),t.AsE(" ",t.lcZ(55,44,"vnNode.list.receivedTime"),"",null==e.timeLineList[5]?null:e.timeLineList[5].date," "),t.xp6(2),t.Q6J("ngIf",null!==(null==e.timeLineList[5]?null:e.timeLineList[5].fee))}}const $=function(i){return{"pointer-events-none":i}};class x{constructor(s,e,n){this.formBuilder=s,this.spinner=e,this.vnNodeService=n,this.dataShow=[],this.timeLineList=[],this.treeList={amount:"0",details:"",did:"",fromCurrencyType:"",fromPlatformType:"",instance:"",nodeCode:"",rate:"",serviceFee:"",sourceAccountAddress:"",sourceCurrency:"",status:"",submitDate:"",targetAccountAddress:"",targetCurrency:"",toCurrencyType:"",toPlatformType:"",transactionKey:"",transactionType:1},this.progressMode="determinate",this.firstFormGroup=this.formBuilder.group({firstCtrl:["",m.kI.required]}),this.secondFormGroup=this.formBuilder.group({secondCtrl:["",m.kI.required]}),this.isLinear=!1}ngOnInit(){this.paramsSubscription=this.params$.subscribe(s=>{"{}"!==JSON.stringify(s.param)&&this.infoData(s.param.transactionKey,s.param.transactionType)})}setDom(){setTimeout(()=>{let s=0,e=0;1===this.timeLineList[0].color&&(s=0),1===this.timeLineList[1].color&&(s=1),1===this.timeLineList[2].color&&(s=2,e=0),1===this.timeLineList[2].color&&1===this.transactionType&&(s=3,e=2),1===this.timeLineList[4].color&&(s=3,e=0),1===this.timeLineList[5].color&&(s=5,e=2);const n=document.getElementsByClassName("ant-timeline-item-tail");for(var o=0;o<n.length;o++)o>s&&(n[o].style["border-left"]="2px solid #cfcfcf");const Z=document.getElementsByClassName("points");for(o=0;o<Z.length;o++)o>s&&(Z[o].style.filter="grayscale(1)");const N=document.getElementsByClassName("lastPoints");for(o=0;o<N.length;o++)o>e&&(N[o].style.filter="grayscale(1)")},100)}infoData(s,e){this.spinner.show(),this.infoSubscription=this.vnNodeService.info({transactionKey:s,transactionType:e}).pipe((0,b.x)(()=>this.spinner.hide())).subscribe(n=>{this.treeList=n.data,this.type=n.data.fromCurrencyType,this.transactionType=n.data.transactionType;const o=new v;this.timeLineList=o.doData(n.data),this.setDom(),this.dataShow=[[{label:"vnNode.public.nodeName",value:n.data.instance},{label:"vnNode.public.nodeCode",value:n.data.nodeCode}],[{label:"vnNode.public.txnType",value:n.data.transactionType,type:"pip",pip:"txnType"},{label:"vnNode.public.amount",value:n.data.amount+n.data.fromCurrencyType}],[{label:"vnNode.public.did",value:n.data.did}],[{label:"vnNode.public.txnKey",value:n.data.transactionKey,colspan:3}],[{label:"vnNode.public.sourceCurrency",value:n.data.sourceCurrency},{label:"vnNode.public.targetCurrency",value:n.data.targetCurrency}],[{label:"vnNode.public.sourceAccountAddress",value:n.data.sourceAccountAddress},{label:"vnNode.public.targetAccountAddress",value:n.data.targetAccountAddress}],[{label:"vnNode.public.tnName",value:n.data.originalTnName},{label:"vnNode.public.tnCode",value:n.data.originalTnCode}],1===n.data.transactionType?[]:[{label:"vnNode.public.targetTNName",value:n.data.targetTnName},{label:"vnNode.public.targetTNCode",value:n.data.targetTnCode}],[{label:"vnNode.public.serviceFee",value:n.data.serviceFee+n.data.fromCurrencyType},{label:"vnNode.public.rate",value:1===n.data.transactionType?"--":n.data.rate}],[{label:"vnNode.public.totalAmount",value:n.data.totalAmount+n.data.fromCurrencyType},{label:"vnNode.public.receivedAmount",value:n.data.receivedAmount+n.data.toCurrencyType}],[{label:"vnNode.public.submissionTime",value:n.data.submitDate,type:"pip",pip:"date"},{label:"vnNode.public.status",value:n.data.status,type:"pip",pip:"vnStatus"}]],this.treeList=n.data.details})}ngOnDestroy(){var s,e;null===(s=this.paramsSubscription)||void 0===s||s.unsubscribe(),null===(e=this.infoSubscription)||void 0===e||e.unsubscribe()}}x.\u0275fac=function(s){return new(s||x)(t.Y36(m.qu),t.Y36(O.t2),t.Y36(D))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-info"]],decls:116,vars:106,consts:[[1,"w-full","bg-white","shadow-sm","rounded-md","border","border-gray-100","border-solid",3,"ngClass"],[1,"flex","flex-row","items-center","h-14","border-b","border-gray-200","border-solid","justify-between","pl-6","pr-6"],[1,"font-sans","text-sm","font-bold","text-gray-700"],[1,"p-12","relative"],["bdColor","rgba(255,255,255,0.4)","size","default","color","#326594","type","square-jelly-box",3,"fullScreen"],[1,"w-3/4","mx-auto","create","pr-16","pl-16","md:w-full","2xl:w-full"],[1,"font-sans","text-sm","font-bold","text-gray-700","mb-10"],[3,"dataShow"],[1,"font-sans","text-sm","font-bold","text-gray-700","mt-20","mb-10"],[1,"w-3/4","mx-auto","create","pr-16","pl-16","md:w-full","2xl:w-3/4"],[1,"font-sans","text-sm","font-bold","text-center","mr-40","mb-10"],[1,"text-center"],[1,"flex","mt-5","items-center"],[1,"w-8","h-8","rounded-full","space",2,"background-color","#0f618d"],[1,"font-bold","text-xl","ml-4"],[1,"w-8","time-space",2,"height","120px","text-align","center","border-right","2px solid #0f618d"],[1,"card-space"],[1,"flex"],[1,"flex","flex-col","items-center","justify-center"],[1,"w-60","text-center","p-2","time-card"],[1,"ml-4",3,"ngClass"],["src","../../../../assets/images/poiner.png","alt","",1,"points"],[1,"points"],[2,"width","14px","height","80px","text-align","center","border-right","2px solid #0f618d"],[1,"text-left","ml-2",2,"width","540px"],[1,""],[1,"w-8","time-space",2,"height","80px","float","initial","text-align","center","border-right","2px solid #0f618d",3,"ngClass"],[1,"flex","md:ml-0","xl:ml-10","2xl:-ml-0","ml-0"],[1,"text-right",2,"width","540px"],[1,"ml-3","w-8",3,"ngClass"],["src","../../../../assets/images/poiner.png","alt","",1,""],[2,"width","13px","height","80px","text-align","center","border-right","2px solid #0f618d",3,"ngClass"],[1,"flex","flex-col","items-center","justify-center","w-60","h-16","text-center","p-2","time-card",3,"ngClass"],["style","\n                  height: 32px;\n                  line-height: 32px;\n                  border-bottom: 2px solid #0f618d;\n                ","class","w-16",4,"ngIf"],["class","flex flex-col items-center justify-center w-60 h-16 text-center p-2 time-card-error",4,"ngIf"],["class","flex w-24 lastPoints mt-4",4,"ngIf"],[1,"w-8","time-space",2,"height","80px","text-align","center","border-right","2px solid #0f618d",3,"ngClass"],[1,"w-60","text-center","items-center","p-2","time-card",3,"ngClass"],[4,"ngIf"],[1,"w-8","lastPoints","time-space",2,"height","80px","text-align","center","border-right","2px solid #0f618d",3,"ngClass"],[1,"flex","items-center","lastPoints","space","xl:","spaces"],[1,"w-8","h-8","rounded-full",2,"background-color","#0f618d"],["colspan","4",1,"text-right","mb-30"],["mat-stroked-button","","color","primary","type","button","routerLink","../"],[1,"w-16",2,"height","32px","line-height","32px","border-bottom","2px solid #0f618d"],[1,"flex","flex-col","items-center","justify-center","w-60","h-16","text-center","p-2","time-card-error"],[1,"flex","w-24","lastPoints","mt-4"],[1,"font-bold","w-12","text-xl","ml-4"],["style","\n                    height: 32px;\n                    line-height: 32px;\n                    border-bottom: 2px solid #0f618d;\n                  ","class","w-16",4,"ngIf"],[1,"w-60","text-center","p-2","time-card",3,"ngClass"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"ngx-spinner",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"app-udpn-info",7),t.TgZ(11,"div",8),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.ynx(14,9),t.TgZ(15,"div",10),t._uU(16),t.qZA(),t.TgZ(17,"div",11),t.TgZ(18,"div",12),t._UZ(19,"div",13),t.TgZ(20,"div",14),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.qZA(),t._UZ(23,"div",15),t.TgZ(24,"div",16),t.TgZ(25,"div",17),t.TgZ(26,"div",18),t.TgZ(27,"div",19),t.TgZ(28,"div"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"div"),t._uU(32,"(#1)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",20),t._UZ(34,"img",21),t.TgZ(35,"span",22),t._UZ(36,"div",23),t.qZA(),t.qZA(),t.TgZ(37,"div",24),t.TgZ(38,"div",25),t.TgZ(39,"div"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"div"),t._uU(43),t.ALo(44,"translate"),t.ALo(45,"vnStatus"),t.qZA(),t.TgZ(46,"div"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(49,"div",26),t.TgZ(50,"div",27),t.TgZ(51,"div",28),t.TgZ(52,"div",25),t.TgZ(53,"div"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"div"),t._uU(57),t.ALo(58,"translate"),t.ALo(59,"vnStatus"),t.qZA(),t.TgZ(60,"div"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",29),t._UZ(64,"img",30),t.TgZ(65,"span",22),t._UZ(66,"div",31),t.qZA(),t.qZA(),t.TgZ(67,"div",17),t.TgZ(68,"div",32),t.TgZ(69,"div"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"div"),t._uU(73,"(#2)"),t.qZA(),t.qZA(),t.YNc(74,Q,1,0,"div",33),t.YNc(75,V,6,3,"div",34),t.YNc(76,B,1,0,"div",33),t.YNc(77,j,5,0,"div",35),t.qZA(),t.qZA(),t._UZ(78,"div",36),t.TgZ(79,"div",16),t.TgZ(80,"div",17),t.TgZ(81,"div",18),t.TgZ(82,"div",37),t.TgZ(83,"div"),t._uU(84),t.ALo(85,"translate"),t.qZA(),t.TgZ(86,"div"),t._uU(87,"(#3)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",20),t._UZ(89,"img",30),t.TgZ(90,"span",22),t._UZ(91,"div",23),t.qZA(),t.qZA(),t.TgZ(92,"div",24),t.TgZ(93,"div",25),t.TgZ(94,"div"),t._uU(95),t.ALo(96,"translate"),t.qZA(),t.TgZ(97,"div"),t._uU(98),t.ALo(99,"translate"),t.ALo(100,"vnStatus"),t.qZA(),t.TgZ(101,"div"),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.YNc(104,Y,3,4,"div",38),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(105,G,57,60,"div",38),t._UZ(106,"div",39),t.TgZ(107,"div",40),t._UZ(108,"div",41),t.TgZ(109,"div",14),t._uU(110),t.ALo(111,"translate"),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.TgZ(112,"div",42),t.TgZ(113,"button",43),t._uU(114),t.ALo(115,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.Q6J("ngClass",t.VKq(86,$,"indeterminate"===e.progressMode)),t.xp6(3),t.Oqu("Detail"),t.xp6(2),t.Q6J("fullScreen",!1),t.xp6(3),t.hij(" ",t.lcZ(9,46,"vnNode.list.basicInformation")," "),t.xp6(2),t.Q6J("dataShow",e.dataShow),t.xp6(2),t.hij(" ",t.lcZ(13,48,"vnNode.list.circulationInformation")," "),t.xp6(4),t.hij(" ","State machine of a normal "+(1===e.transactionType?"transfer":"swap")+" transaction"," "),t.xp6(5),t.hij(" ",t.lcZ(22,50,"vnNode.list.start")," "),t.xp6(8),t.Oqu(t.lcZ(30,52,"vnNode.list.pending")),t.xp6(4),t.Q6J("ngClass",t.VKq(88,L,3===(null==e.timeLineList[0]?null:e.timeLineList[0].color))),t.xp6(7),t.AsE(" ",t.lcZ(41,54,"vnNode.list.txnId"),"",null==e.timeLineList[0]?null:e.timeLineList[0].key," "),t.xp6(3),t.AsE(" ",t.lcZ(44,56,"vnNode.list.txnState"),"",t.lcZ(45,58,null==e.timeLineList[0]?null:e.timeLineList[0].status)," "),t.xp6(4),t.AsE(" ",t.lcZ(48,60,"vnNode.list.receivedTime"),"",null==e.timeLineList[0]?null:e.timeLineList[0].date," "),t.xp6(2),t.Q6J("ngClass",t.VKq(90,L,3===(null==e.timeLineList[1]?null:e.timeLineList[1].color))),t.xp6(5),t.AsE(" ",t.lcZ(55,62,"vnNode.list.txnId"),"",null==e.timeLineList[1]?null:e.timeLineList[1].key," "),t.xp6(3),t.AsE(" ",t.lcZ(58,64,"vnNode.list.txnState"),"",t.lcZ(59,66,null==e.timeLineList[1]?null:e.timeLineList[1].status)," "),t.xp6(4),t.AsE(" ",t.lcZ(62,68,"vnNode.list.receivedTime"),"",null==e.timeLineList[1]?null:e.timeLineList[1].date," "),t.xp6(2),t.Q6J("ngClass",t.VKq(92,L,3===(null==e.timeLineList[1]?null:e.timeLineList[1].color))),t.xp6(3),t.Q6J("ngClass",t.VKq(94,E,null==e.timeLineList[3]?null:e.timeLineList[3].is)),t.xp6(2),t.Q6J("ngClass",t.VKq(96,U,3===(null==e.timeLineList[1]?null:e.timeLineList[1].color))),t.xp6(2),t.Oqu(t.lcZ(71,70,"vnNode.list.tn1Processing")),t.xp6(4),t.Q6J("ngIf",null==e.timeLineList[3]?null:e.timeLineList[3].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[3]?null:e.timeLineList[3].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[3]?null:e.timeLineList[3].is),t.xp6(1),t.Q6J("ngIf",null==e.timeLineList[3]?null:e.timeLineList[3].is),t.xp6(1),t.Q6J("ngClass",t.VKq(98,L,3===(null==e.timeLineList[2]?null:e.timeLineList[2].color))),t.xp6(4),t.Q6J("ngClass",t.VKq(100,U,3===(null==e.timeLineList[2]?null:e.timeLineList[2].color))),t.xp6(2),t.Oqu(t.lcZ(85,72,"vnNode.list.tn1ProcessSuccess")),t.xp6(4),t.Q6J("ngClass",t.VKq(102,L,3===(null==e.timeLineList[2]?null:e.timeLineList[2].color))),t.xp6(7),t.AsE(" ",t.lcZ(96,74,"vnNode.list.txnId"),"",null==e.timeLineList[2]?null:e.timeLineList[2].key," "),t.xp6(3),t.AsE(" ",t.lcZ(99,76,"vnNode.list.txnState"),"",t.lcZ(100,78,null==e.timeLineList[2]?null:e.timeLineList[2].status)," "),t.xp6(4),t.AsE(" ",t.lcZ(103,80,"vnNode.list.receivedTime"),"",null==e.timeLineList[2]?null:e.timeLineList[2].date," "),t.xp6(2),t.Q6J("ngIf",null!==(null==e.timeLineList[2]?null:e.timeLineList[2].fee)),t.xp6(1),t.Q6J("ngIf",2===e.transactionType),t.xp6(1),t.Q6J("ngClass",t.VKq(104,L,null!=e.timeLineList[5]&&e.timeLineList[5].is?3===(null==e.timeLineList[5]?null:e.timeLineList[5].color):3===(null==e.timeLineList[2]?null:e.timeLineList[2].color))),t.xp6(4),t.hij(" ",t.lcZ(111,82,"vnNode.list.end")," "),t.xp6(4),t.hij(" ",t.lcZ(115,84,"back")," "))},directives:[g.mk,O.Ro,J.m,g.O5,K.lW,d.rH],pipes:[y.X$,M.z],styles:[".time-card-gray[_ngcontent-%COMP%]{background-color:#948f8f!important;box-shadow:10px 5px 15px #948f8f!important}.time-card[_ngcontent-%COMP%]{background-color:#0f618d;box-shadow:10px 5px 15px #0f618d}.time-card-error[_ngcontent-%COMP%]{background-color:#c7000b;box-shadow:10px 5px 15px #c7000b;color:#fff}.space[_ngcontent-%COMP%]{margin-left:548px}.time-space[_ngcontent-%COMP%]{margin-left:533px}.card-space[_ngcontent-%COMP%]{margin-left:295px}.ml[_ngcontent-%COMP%]{margin-left:1px}.time-color[_ngcontent-%COMP%]{color:#ff0!important}"]}),(0,r.gn)([(0,c.Ph)(F.s.param)],x.prototype,"params$",void 0);var I=l(9247),k=l(2192),tt=l(8966),et=l(6852),nt=l(7464);const it=function(i){return{hidden:i}};function st(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"span",2),t._uU(2,"|"),t.qZA(),t.TgZ(3,"div",3),t.TgZ(4,"a",4),t.NdJ("click",function(){const Z=t.CHM(e).data,N=t.oxw();return N.onJump(N.app_path_info,Z.transactionType,Z.transactionKey)}),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=s.data;t.xp6(1),t.Q6J("ngClass",t.VKq(4,it,2e3!==e.voteResult)),t.xp6(4),t.Oqu(t.lcZ(6,2,"detail"))}}const at=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class i{constructor(e,n,o,Z,N,ut,dt){this.vnNodeService=e,this.dialog=n,this.spinner=o,this.translateService=Z,this.router=N,this.sharedService=ut,this.store=dt,this.app_title="vnNode.list.title",this.app_title_fiter="vnNode.list.fiter",this.app_path_proposal=(new I.w).proposalAlianceList,this.app_path_info=(new I.w).vnNodeInfo,this.snapFilter=this.sharedService.getSnapFilter||{},this.platfromArrList=[],this.curryArrList=[],this.pagedata=[{tag:"vnNode.public.nodeName",colunm:"instance",colunmData:"instance"},{tag:"vnNode.public.nodeCode",colunm:"nodeCode",colunmData:"nodeCode"},{tag:"vnNode.public.did",colunm:"did",colunmData:"did"},{tag:"vnNode.public.txnKey",colunm:"transactionKey",colunmData:"transactionKey"},{tag:"vnNode.public.txnType",colunm:"transactionType",colunmData:"transactionType",pip:"txnType"},{tag:"vnNode.public.sourceCurrency",colunm:"sourceCurrency",colunmData:"sourceCurrency"},{tag:"vnNode.public.amount",colunm:"amount",colunmData:"amount"},{tag:"vnNode.public.targetCurrency",colunm:"targetCurrency",colunmData:"targetCurrency"},{tag:"vnNode.public.submissionDate",colunm:"submitDate",colunmData:"submitDate",pip:"date"},{tag:"vnNode.public.status",colunm:"status",colunmData:"status",pip:"vnStatus"},{tag:"vnNode.list.action",colunm:"Action"}],this.dataFilter=[{name:"instance",tag:"vnNode.public.nodeName",type:"input",maxLen:24},{name:"nodeCode",tag:"vnNode.public.nodeCode",type:"input",maxLen:24},{name:"did",tag:"vnNode.public.did",type:"input",maxLen:24},{name:"transactionKey",tag:"vnNode.public.txnKey",type:"input",maxLen:24},{name:"transactionType",tag:"vnNode.public.txnType",type:"select",option:[{label:"vnNode.txnType.all",val:""},{label:"vnNode.txnType.transfer",val:1},{label:"vnNode.txnType.swap",val:2}]},{name:"sourceCurrency",tag:"vnNode.public.sourceCurrency",type:"selects",currencyName:"fromCurrencyType",platformName:"fromPlatformType",option:this.curryArrList,options:this.platfromArrList},{name:"targetCurrency",tag:"vnNode.public.targetCurrency",type:"selects",currencyName:"toCurrencyType",platformName:"toPlatformType",option:this.curryArrList,options:this.platfromArrList},{name:"submitDate",tag:"vnNode.public.submissionDate",type:"rangDate",startName:"startDate",endName:"endDate"},{name:"status",tag:"vnNode.public.status",type:"select",option:[{label:"vnNode.status.all",val:""},{label:"vnNode.status.pending",val:1},{label:"vnNode.status.tn1Processing",val:2},{label:"vnNode.status.tn1Success",val:3},{label:"vnNode.status.tn1Failed",val:4},{label:"vnNode.status.tn2Processing",val:5},{label:"vnNode.status.tn2Success",val:6},{label:"vnNode.status.tn2Failed",val:7},{label:"vnNode.status.refunding",val:8},{label:"vnNode.status.refundSuccess",val:9},{label:"vnNode.status.refundFailed",val:10},{label:"vnNode.status.revokeSuccess",val:11}]}]}ngOnInit(){this.initData(),this.loadService(this.snapFilter)}loadService(e){this.subscription=this.vnNodeService.list(e).subscribe(n=>{this.dataSource=n.data,this.total=n.resultPageInfo.total})}fetchAll(e){if(e.hasOwnProperty("type")&&"search"===e.type)return e.data.inPage={pageSize:10,pageNum:1},this.snapFilter=Object.assign(Object.assign({},this.snapFilter),e.data),void this.loadService(this.snapFilter);this.snapFilter=Object.assign(Object.assign({},this.snapFilter),e),this.loadService(this.snapFilter)}init(){this.snapFilter={},this.loadService(this.snapFilter)}initData(){this.vnNodeService.getCurry().subscribe(e=>{e.data.forEach(o=>{this.curryArrList.push({label:o.currencyName,val:o.currencyName})}),this.curryArrList.unshift({label:"ALL",val:""})}),this.vnNodeService.getPlatm().subscribe(e=>{e.data.forEach(o=>{this.platfromArrList.push({label:o.platformName,val:o.platformName})}),this.platfromArrList.unshift({label:"ALL",val:""})})}onProposal(e,n,o){this.sharedService.setSnapFilter={transactionType:n,transactionKey:o},this.router.navigate([e])}onJump(e,n,o){this.store.dispatch(new k.A({transactionType:n,transactionKey:o})).subscribe(Z=>{this.router.navigate([e])})}ngOnDestroy(){var e,n;null===(e=this.subscription)||void 0===e||e.unsubscribe(),null===(n=this.submitSubscription)||void 0===n||n.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(D),t.Y36(tt.uw),t.Y36(O.t2),t.Y36(y.sK),t.Y36(d.F0),t.Y36(et.F),t.Y36(c.yh))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],decls:2,vars:6,consts:[[3,"title_fiter","title","dataSource","pagedata","dataFilter","t","toParentOk","toParentCal"],[1,"flex"],[3,"ngClass"],[1,"c-btn"],[1,"text-yellow-500","font-semibold",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"app-udpn-list",0),t.NdJ("toParentOk",function(Z){return n.fetchAll(Z)})("toParentCal",function(){return n.init()}),t.YNc(1,st,7,6,"ng-template"),t.qZA()),2&e&&t.Q6J("title_fiter",n.app_title_fiter)("title",n.app_title)("dataSource",n.dataSource)("pagedata",n.pagedata)("dataFilter",n.dataFilter)("t",n.total)},directives:[nt.p,g.mk],pipes:[y.X$],styles:[""]}),i})()},{path:"info",component:x}];let lt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[d.Bz.forChild(at)],d.Bz]}),i})();var ot=l(8554);let rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:T.o2,useValue:{appearance:"outline"}},{provide:f.l7,multi:!0,useFactory:_.R,deps:[y.sK]}],imports:[[a.m,g.ez,ot.o,lt,f.X0.forRoot({types:[{name:"cInput",component:p.N},{name:"code",component:u.x},{name:"cbutton",component:A.k}],wrappers:[{name:"panel",component:C.X}]})]]}),i})()}}]);