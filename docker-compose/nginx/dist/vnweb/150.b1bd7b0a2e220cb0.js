"use strict";(self.webpackChunkudpn_tem2=self.webpackChunkudpn_tem2||[]).push([[150],{2150:(nt,N,o)=>{o.r(N),o.d(N,{UnionistModule:()=>st});var v=o(9808),b=o(5089),P=o(655),g=o(3075),u=o(8746),y=o(6661),M=o(4842),C=o(2192),d=o(1422),t=o(5e3),I=o(2290),A=o(72),D=o(8966),c=o(1062),O=o(4350),w=o(2214),Z=o(8776),S=o(7423);function F(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().submit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.contactForm.valid),t.xp6(1),t.Oqu(t.lcZ(2,2,"save"))}}function J(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().edit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("disabled",!e.form.valid||!e.contactForm.valid),t.xp6(1),t.Oqu(t.lcZ(2,2,"edit"))}}class m{constructor(s,e,i,r,n,l,h){this.toastr=s,this.spinner=e,this.location=i,this.dialog=r,this.translate=n,this.unionistService=l,this.store=h,this.tempStatus=!0,this.form=new g.cw({}),this.contactForm=new g.cw({}),this.countryList=[],this.model={chainMemberPhone:"",chainMemberLicense:""},this.options={},this.contactFields=[{fieldGroupClassName:"flex justify-between",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.contactName")},fieldGroup:[{className:"w-1/3",type:"cInput",key:"chainMemberContact",templateOptions:{required:!0,maxLength:50},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.contactName"),"templateOptions.placeholder":this.translate.stream("unionist.public.contactName")},validators:{chainMemberContact:{expression:p=>/^[A-Za-z0-9]+$/.test(p.value),message:this.translate.stream("unionist.add.nameError")}}},{className:"col-6 w-full",type:"Input",key:"chainMemberPhone",templateOptions:{maxLength:20},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.mobileNumber"),"templateOptions.placeholder":this.translate.stream("unionist.public.mobileNumber")},validators:{chainMemberPhone:{expression:p=>/^[0-9]*$/.test(p.value),message:this.translate.stream("unionist.add.telError")}}}]},{fieldGroupClassName:"flex justify-between",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.email")},fieldGroup:[{className:"w-full",type:"cInput",key:"nodeEmail",templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.email"),"templateOptions.placeholder":this.translate.stream("unionist.public.email")},validators:{nodeEmail:{expression:p=>/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(p.value),message:this.translate.stream("unionist.add.emailError")}}}]},{key:"chainMemberAddr",wrappers:["panel"],type:"cInput",templateOptions:{required:!0,maxLength:200},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.detailedAddress"),"templateOptions.placeholder":this.translate.stream("unionist.public.detailedAddress")},validators:{chainMemberAddr:{expression:p=>/^[A-Za-z0-9]+$/.test(p.value),message:this.translate.stream("unionist.add.nameError")}}},{fieldGroupClassName:"flex formlyTextarea",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.businessLicense")},fieldGroup:[{type:"upload",templateOptions:{required:""===this.model.chainMemberLicense}}]},{fieldGroupClassName:"flex formlyTextarea",wrappers:["panel"],templateOptions:{height:"100px"},fieldGroup:[{key:"chainMemberLicense",type:"cimage",className:"w-full formlyTextareaKey",templateOptions:{required:!0},expressionProperties:{"templateOptions.labels":this.translate.stream("unionist.public.businessLicense"),"templateOptions.placeholder":this.translate.stream("unionist.public.businessLicense")}}]}],this.nodeFields=[{fieldGroupClassName:"flex justify-between",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.nodeName")},fieldGroup:[{className:"col-6",type:"cInput",key:"udpnPeerName",templateOptions:{required:!0,maxLength:50},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.nodeName"),"templateOptions.placeholder":this.translate.stream("unionist.public.nodeName")},validators:{nodeName:{expression:p=>/^(\\$|[a-zA-Z_])[a-zA-Z0-9]{1,50}$/.test(p.value),message:this.translate.stream("unionist.add.vNodeName")}}},{className:"col-6",type:"keyValue",key:"udpnPeerNo",templateOptions:{value:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.nodeCode")}}]},{fieldGroupClassName:"flex justify-between",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.nodeType")},fieldGroup:[{key:"udpnPeerType",type:"select",className:"col-6",defaultValue:4,templateOptions:{options:[{value:4,label:"VN"}],compareWith:this.compareIdObjects},expressionProperties:{"templateOptions.labels":this.translate.stream("unionist.public.nodeType"),"templateOptions.placeholder":this.translate.stream("unionist.public.nodeType")}},{className:"col-6",type:"Input",key:"chainMemberUrl",templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.gatewayAddress"),"templateOptions.placeholder":this.translate.stream("unionist.add.gatewayAddress")},validators:{chainMemberUrl:{expression:p=>/^((http:\/\/|https:\/\/)?([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(:\d{0,5})(\/.*)?$/.test(p.value),message:this.translate.stream("unionist.add.emailError")}}}]},{fieldGroupClassName:"flex justify-between",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.country")},fieldGroup:[{key:"country",type:"select",className:"w-full",defaultValue:1,templateOptions:{compareWith:this.tempStatus?"":this.compareIdObjects},expressionProperties:{"templateOptions.labels":this.translate.stream("unionist.public.country"),"templateOptions.placeholder":this.translate.stream("unionist.public.country"),"templateOptions.options":()=>this.countryList}}]},{key:"udpnPeerTitle",wrappers:["panel"],type:"cInput",templateOptions:{required:!0,maxLength:255},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.introduction"),"templateOptions.placeholder":this.translate.stream("unionist.public.introduction")}},{fieldGroupClassName:"flex formlyTextarea",wrappers:["panel"],templateOptions:{required:!0,height:"100px"},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.description")},fieldGroup:[{key:"udpnPeerDesc",type:"textarea",className:"w-full",templateOptions:{required:!0,maxLength:500},expressionProperties:{"templateOptions.labels":this.translate.stream("unionist.public.description"),"templateOptions.placeholder":this.translate.stream("unionist.public.description")}}]},{fieldGroupClassName:"flex formlyTextarea",wrappers:["panel"],templateOptions:{required:!0},expressionProperties:{"templateOptions.label":this.translate.stream("unionist.public.DIDDocument")},fieldGroup:[{type:"cbutton",key:"button"}]},{fieldGroupClassName:"flex formlyTextarea",wrappers:["panel"],templateOptions:{height:"380px"},fieldGroup:[{key:"udpnDidDocument",type:"textarea",className:"w-full formlyTextareaKey",templateOptions:{required:!0,readonly:!0},expressionProperties:{"templateOptions.labels":this.translate.stream("unionist.public.DIDDocument"),"templateOptions.placeholder":this.translate.stream("unionist.public.DIDDocument")}}]}]}ngOnInit(){this.getCountry(),this.paramsSubscription=this.params$.subscribe(s=>{"{}"!==JSON.stringify(s.param)&&(this.tempStatus=!1,this.infoData(s.param.nodeCode))})}compareIdObjects(s,e){return!(!e&&!s||e&&s.id!==e.id)}getCountry(){this.spinner.show(),this.countrySubscription=this.unionistService.getCountry({}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(s=>{this.countryList=s.data;const e=[];this.countryList.map((i,r)=>{e.push({value:Number(i.countryId),label:i.enName})}),this.countryList=e})}submit(){this.spinner.show(),console.log(this.model.chainMemberLicense),this.getSubscription=this.unionistService.getLicense(this.model.chainMemberLicense).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(s=>{this.setSubscription=this.unionistService.setLicense({hash:s.data}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(e=>{this.memberLicense=s.data,this.addSubscription=this.unionistService.add({udpnDidDocument:this.model.udpnDidDocument,udpnPeerNo:this.model.udpnPeerNo,udpnPeerName:this.model.udpnPeerName,udpnPeerType:this.model.udpnPeerType,udpnPeerTitle:this.model.udpnPeerTitle,udpnPeerDesc:this.model.udpnPeerDesc,nodeEmail:this.model.nodeEmail,chainMemberAddr:this.model.chainMemberAddr,chainMemberContact:this.model.chainMemberContact,chainMemberLicense:this.memberLicense,country:this.model.country,chainMemberPhone:this.model.chainMemberPhone,chainMemberUrl:this.model.chainMemberUrl}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(i=>{0!==i.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"Success",body:"Node added successfully!"}}).afterClosed().subscribe(n=>{n&&this.location.back()})})})})}infoData(s){this.spinner.show(),this.infoSubscription=this.unionistService.info({udpnDid:s}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(e=>{this.model.createDate=e.data.createDate,this.model.state=e.data.state,this.model.udpnDid=e.data.udpnDid,this.model.updateDate=e.data.updateDate,this.model.udpnPeerType=4,this.model.udpnDidDocument=this.form.get("udpnDidDocument").value,this.model.countryId=this.form.get("country"),this.form.get("udpnPeerName").setValue(e.data.udpnPeerName),this.form.get("udpnPeerType").setValue(e.data.udpnPeerType),this.form.get("udpnPeerNo").setValue(e.data.udpnPeerNo),this.form.get("udpnPeerTitle").setValue(e.data.udpnPeerTitle),this.form.get("udpnPeerDesc").setValue(e.data.udpnPeerDesc),this.form.get("udpnDidDocument").setValue(e.data.memberNodeDidDoc),this.form.get("country").setValue(e.data.countryId),this.form.get("chainMemberUrl").setValue(e.data.chainMemberUrl),this.contactForm.get("chainMemberAddr").setValue(e.data.chainMemberAddr),this.contactForm.get("chainMemberPhone").setValue(e.data.chainMemberPhone),this.contactForm.get("nodeEmail").setValue(e.data.nodeEmail),this.contactForm.get("chainMemberContact").setValue(e.data.chainMemberContact),this.setSubscription=this.unionistService.setLicense({hash:e.data.memberLicense}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(i=>{this.contactForm.get("chainMemberLicense").setValue("data:image/jpg;base64,"+i.data),this.orignalMemberLicense=e.data.memberLicense})})}edit(){this.spinner.show(),console.log(this.model.chainMemberLicense),this.model.chainMemberLicense===this.contactForm.get("chainMemberLicense").value?(this.model.chainMemberLicense=this.orignalMemberLicense,this.editSubscription=this.unionistService.edit(this.model).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(s=>{0!==s.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Edit successfully!"}}).afterClosed().subscribe(i=>{i&&this.location.back()})})):this.getSubscription=this.unionistService.getLicense(this.model.chainMemberLicense).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(s=>{this.setSubscription=this.unionistService.setLicense({hash:s.data}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(e=>{this.contactForm.get("chainMemberLicense").setValue("data:image/jpg;base64,"+e.data),this.model.chainMemberLicense=s.data,this.editSubscription=this.unionistService.edit(this.model).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(i=>{0!==i.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Edit successfully!"}}).afterClosed().subscribe(n=>{n&&this.location.back()})})})})}ngOnDestroy(){var s,e,i,r,n,l,h,p;this.store.dispatch(new C.A({})),null===(s=this.paramsSubscription)||void 0===s||s.unsubscribe(),null===(e=this.addSubscription)||void 0===e||e.unsubscribe(),null===(i=this.getSubscription)||void 0===i||i.unsubscribe(),null===(r=this.setSubscription)||void 0===r||r.unsubscribe(),null===(n=this.editSubscription)||void 0===n||n.unsubscribe(),null===(l=this.infoSubscription)||void 0===l||l.unsubscribe(),null===(h=this.countrySubscription)||void 0===h||h.unsubscribe(),null===(p=this.getNodeCodeSubscription)||void 0===p||p.unsubscribe()}}m.\u0275fac=function(s){return new(s||m)(t.Y36(I._W),t.Y36(A.t2),t.Y36(v.Ye),t.Y36(D.uw),t.Y36(c.sK),t.Y36(O.x),t.Y36(y.yh))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-add"]],decls:18,vars:21,consts:[[3,"title"],[1,"font-sans","text-sm","whitespace-nowrap","font-bold","mb-8"],[3,"formGroup"],[1,"mb-8"],[3,"model","fields","options","form"],[1,"mt-8",3,"model","fields","options","form"],[1,"flex","justify-end"],["mat-stroked-button","","color","primary","type","button","routerLink","../"],["mat-raised-button","","color","primary","class","ml-4",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"ml-4",3,"disabled","click"]],template:function(s,e){1&s&&(t.TgZ(0,"app-udpn-card",0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"form",2),t.TgZ(5,"div",3),t._UZ(6,"formly-form",4),t.qZA(),t.TgZ(7,"div",1),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div"),t.TgZ(11,"formly-form",5),t.TgZ(12,"div",6),t.TgZ(13,"button",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.YNc(16,F,3,4,"button",8),t.YNc(17,J,3,4,"button",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.Q6J("title",e.tempStatus?"create":"edit"),t.xp6(2),t.Oqu(t.lcZ(3,15,"unionist.list.nodeInfo")),t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("model",e.model)("fields",e.nodeFields)("options",e.options)("form",e.form),t.xp6(2),t.Oqu(t.lcZ(9,17,"unionist.list.contactInfo")),t.xp6(3),t.Q6J("model",e.model)("fields",e.contactFields)("options",e.options)("form",e.contactForm),t.xp6(3),t.Oqu(t.lcZ(15,19,"back")),t.xp6(2),t.Q6J("ngIf",e.tempStatus),t.xp6(1),t.Q6J("ngIf",!e.tempStatus))},directives:[w.t,g._Y,g.JL,g.sg,Z.T7,S.lW,b.rH,v.O5],pipes:[c.X$],styles:[""]}),(0,P.gn)([(0,y.Ph)(M.s.param)],m.prototype,"params$",void 0);var U=o(827);function q(a,s){if(1&a&&(t.ynx(0,9),t.TgZ(1,"tr",6),t.TgZ(2,"td",10),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"td",11),t._uU(6),t.qZA(),t.qZA(),t.BQk()),2&a){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,"unionist.public.repulseReason")," "),t.xp6(3),t.Oqu(e.infoDatas.nodeRepulseReason)}}function E(a,s){if(1&a&&(t.ynx(0,9),t.TgZ(1,"tr",6),t.TgZ(2,"td",10),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"td",11),t._uU(6),t.qZA(),t.qZA(),t.BQk()),2&a){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,"unionist.public.applyExitReason")," "),t.xp6(3),t.Oqu(e.infoDatas.applyExitReason)}}class f{constructor(s,e,i,r){this.spinner=s,this.translate=e,this.unionistService=i,this.store=r,this.nodeInfo=[],this.contactInfo=[]}ngOnInit(){this.paramsSubscription=this.params$.subscribe(s=>{"{}"!==JSON.stringify(s.param)&&this.infoData(s.param.nodeCode)})}infoData(s){this.spinner.show(),this.infoSubscription=this.unionistService.info({udpnDid:s}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(e=>{this.infoStatus=e.data.state,this.infoDatas=e.data,this.nodeInfo=[[{label:"unionist.public.nodeName",value:e.data.udpnPeerName},{label:"unionist.public.nodeCode",value:e.data.udpnPeerNo}],[{label:"unionist.public.nodeType",value:e.data.udpnPeerType,type:"pip",pip:"nodeListType"},{label:"unionist.public.creation",value:e.data.createDate,type:"pip",pip:"date"}],[{label:"unionist.public.fromVN",value:e.data.fromVn},{label:"unionist.public.status",value:e.data.state,type:"pip",pip:"nodeListStatus"}],[{label:"unionist.public.gatewayAddress",value:e.data.chainMemberUrl},{label:"membership.public.country",value:e.data.country}],[{label:"unionist.public.introduction",value:e.data.udpnPeerTitle,colspan:3,type:"text"}],[{label:"unionist.public.description",value:e.data.udpnPeerDesc,colspan:3,type:"html"}],[{label:"unionist.public.DIDDocument",value:e.data.memberNodeDidDoc,colspan:3,type:"did"}]],this.contactInfo=[[{label:"unionist.public.contactName",value:e.data.chainMemberContact},{label:"unionist.public.mobileNumber",value:e.data.chainMemberPhone}],[{label:"unionist.public.email",value:e.data.nodeEmail}],[{label:"unionist.public.detailedAddress",value:e.data.chainMemberAddr,colspan:3,type:"text"}],[{label:"unionist.public.businessLicense",value:this.infoMemberLicense,type:"img"}]],this.setSubscription=this.unionistService.setLicense({hash:e.data.memberLicense}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(i=>{this.infoMemberLicense="data:image/jpg;base64,"+i.data,this.contactInfo[3]=[{label:"membership.public.businessLicense",value:this.infoMemberLicense,type:"img"}]})})}ngOnDestroy(){var s,e,i;this.store.dispatch(new C.A({})),null===(s=this.paramsSubscription)||void 0===s||s.unsubscribe(),null===(e=this.infoSubscription)||void 0===e||e.unsubscribe(),null===(i=this.setSubscription)||void 0===i||i.unsubscribe()}}f.\u0275fac=function(s){return new(s||f)(t.Y36(A.t2),t.Y36(c.sK),t.Y36(O.x),t.Y36(y.yh))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-info"]],decls:17,vars:13,consts:[["title","detail"],[1,"font-sans","text-sm","whitespace-nowrap","font-bold","mb-4"],[3,"dataShow"],["head","",4,"ngIf"],[1,"font-sans","text-sm","whitespace-nowrap","font-bold","mt-12","mb-4"],["tail",""],[1,"h-16"],["colspan","4",1,"text-right"],["mat-stroked-button","","color","primary","type","button","routerLink","../"],["head",""],[1,"text-right","font-sans","text-sm","font-bold","pr-3","w-1/5"],["colspan","3"]],template:function(s,e){1&s&&(t.TgZ(0,"app-udpn-card",0),t.TgZ(1,"div",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"app-udpn-info",2),t.YNc(5,q,7,4,"ng-container",3),t.YNc(6,E,7,4,"ng-container",3),t.qZA(),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"app-udpn-info",2),t.ynx(11,5),t.TgZ(12,"tr",6),t.TgZ(13,"td",7),t.TgZ(14,"button",8),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.qZA()),2&s&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"unionist.list.nodeInfo")),t.xp6(2),t.Q6J("dataShow",e.nodeInfo),t.xp6(1),t.Q6J("ngIf",2010===e.infoStatus),t.xp6(1),t.Q6J("ngIf",4===e.infoStatus||5===e.infoStatus),t.xp6(2),t.Oqu(t.lcZ(9,9,"unionist.list.contactInfo")),t.xp6(2),t.Q6J("dataShow",e.contactInfo),t.xp6(5),t.Oqu(t.lcZ(16,11,"back")))},directives:[w.t,U.m,v.O5,S.lW,b.rH],pipes:[c.X$],styles:[""]}),(0,P.gn)([(0,y.Ph)(M.s.param)],f.prototype,"params$",void 0);var x=o(9247),T=o(5001),R=o(5824),V=o(6852),Q=o(7464),L=o(1451),Y=o(5245);function k(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",3),t.TgZ(1,"mat-icon"),t._uU(2,"more_vert"),t.qZA(),t.qZA(),t.TgZ(3,"mat-menu",null,4),t.TgZ(5,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data;return t.oxw().onSubmit(n.nodeCode)}),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data,l=t.oxw();return l.onJump(l.app_path_edit,n.nodeCode,n.nodeName)}),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data;return t.oxw().onApplyExit(n.nodeCode)}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data;return t.oxw().onExit(n.nodeCode)}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"button",6),t.NdJ("click",function(){const n=t.CHM(e).data,l=t.oxw();return l.onJump(l.app_path_info,n.nodeCode,n.nodeName)}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data;return t.oxw().onDelete(n.nodeCode)}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"button",5),t.NdJ("click",function(){const n=t.CHM(e).data,l=t.oxw();return l.onProposal(l.app_path_proposal,n.nodeCode)}),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA()}if(2&a){const e=s.data,i=t.MAs(4);t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("disabled",1!==e.status),t.xp6(1),t.Oqu(t.lcZ(7,14,"submit")),t.xp6(2),t.Q6J("disabled",1!==e.status),t.xp6(1),t.Oqu(t.lcZ(10,16,"edit")),t.xp6(2),t.Q6J("disabled",3!==e.status||e.nodeIsApplyExited),t.xp6(1),t.Oqu(t.lcZ(13,18,"applyForExit")),t.xp6(2),t.Q6J("disabled",4!==e.status||e.nodeIsExited),t.xp6(1),t.Oqu(t.lcZ(16,20,"exit")),t.xp6(3),t.Oqu(t.lcZ(19,22,"detail")),t.xp6(2),t.Q6J("disabled",1!==e.status),t.xp6(1),t.Oqu(t.lcZ(22,24,"delete")),t.xp6(2),t.Q6J("disabled",1===e.status),t.xp6(1),t.Oqu(t.lcZ(25,26,"proposalHistory"))}}const _=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class a{constructor(e,i,r,n,l,h,p){this.unionistService=e,this.dialog=i,this.spinner=r,this.translateService=n,this.router=l,this.sharedService=h,this.store=p,this.app_title="unionist.list.title",this.app_create="unionist.list.create",this.app_title_fiter="unionist.list.fiter",this.app_path_proposal=(new x.w).proposalAlianceList,this.app_path_add=(new x.w).vnMembershipsAdd,this.app_path_edit=(new x.w).vnMembershipsEdit,this.app_path_info=(new x.w).vnMembershipsInfo,this.snapFilter=this.sharedService.getSnapFilter||{},this.pagedata=[{tag:"unionist.public.nodeName",colunm:"nodeName",colunmData:"nodeName"},{tag:"unionist.public.nodeCode",colunm:"nodeCode",colunmData:"nodeCode"},{tag:"unionist.public.introduction",colunm:"nodeTitle",colunmData:"nodeTitle"},{tag:"unionist.public.nodeType",colunm:"nodeType",colunmData:"nodeType",pip:"nodeListType"},{tag:"unionist.public.creation",colunm:"createDate",colunmData:"createDate",pip:"date"},{tag:"unionist.public.fromVN",colunm:"formVn",colunmData:"formVn"},{tag:"unionist.public.status",colunm:"status",colunmData:"status",pip:"nodeListStatus"},{tag:"unionist.list.action",colunm:"Action"}],this.dataFilter=[{name:"nodeName",tag:"unionist.public.nodeName",type:"input",maxLen:24},{name:"nodeCode",tag:"unionist.public.nodeCode",type:"input",maxLen:24},{name:"createTime",tag:"unionist.public.creation",type:"rangDate",startName:"startDate",endName:"endDate"},{name:"status",tag:"unionist.public.nodeStatus",type:"select",option:[{label:"status.all",val:""},{label:"status.init",val:1},{label:"status.submitted",val:2},{label:"status.active",val:3},{label:"status.suspend",val:4},{label:"status.retired",val:5},{label:"status.rejected",val:6}]}]}ngOnInit(){this.loadService(this.snapFilter)}loadService(e){this.subscription=this.unionistService.list(e).subscribe(i=>{this.dataSource=i.data,this.total=i.resultPageInfo.total})}fetchAll(e){if(e.hasOwnProperty("type")&&"search"===e.type)return e.data.inPage={pageSize:10,pageNum:1},this.snapFilter=Object.assign(Object.assign({},this.snapFilter),e.data),void this.loadService(this.snapFilter);this.snapFilter=Object.assign(Object.assign({},this.snapFilter),e),this.loadService(this.snapFilter)}init(){this.snapFilter={},this.loadService(this.snapFilter)}onSubmit(e){this.dialog.open(T.$,{panelClass:"dialog-container-custom",data:{title:"Submit",body:"Are you sure you want to submit this node ?"}}).afterClosed().subscribe(r=>{r&&(this.spinner.show(),this.submitSubscription=this.unionistService.submit({udpnNodeCode:e}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(n=>{0!==n.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Submit successfully!"}}).afterClosed().subscribe(()=>{this.init()})}))})}onApplyExit(e){this.dialog.open(R.A,{panelClass:"dialog-container-custom",data:{title:"Apply For Exit"}}).afterClosed().subscribe(r=>{r&&(this.spinner.show(),this.applyExitSubscription=this.unionistService.applyExit({nodeCode:e,applyReason:r}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(n=>{0!==n.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Apply For Exit successfully!"}}).afterClosed().subscribe(()=>{this.init()})}))})}onExit(e){this.dialog.open(T.$,{panelClass:"dialog-container-custom",data:{title:"Exit",body:"Are you sure you want to exit this node ?"}}).afterClosed().subscribe(r=>{r&&(this.spinner.show(),this.exitSubscription=this.unionistService.exit({nodeCode:e}).pipe((0,u.x)(()=>this.spinner.hide())).subscribe(n=>{0!==n.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Submit successfully!"}}).afterClosed().subscribe(()=>{this.init()})}))})}onDelete(e){this.dialog.open(T.$,{panelClass:"dialog-container-custom",data:{title:"Delete",body:"Are you sure you want to delete this node?"}}).afterClosed().subscribe(r=>{r&&(this.deleteSubscription=this.unionistService.delete({udpnDid:e}).subscribe(n=>{0!==n.code||this.dialog.open(d.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Delete successfully!"}}).afterClosed().subscribe(()=>{this.init()})}))})}onProposal(e,i){this.sharedService.setSnapFilter={nodeCode:i},this.router.navigate([e])}onJump(e,i,r){this.store.dispatch(new C.A({nodeCode:i,nodeName:r})).subscribe(n=>{this.router.navigate([e])})}ngOnDestroy(){var e,i,r,n,l;null===(e=this.subscription)||void 0===e||e.unsubscribe(),null===(i=this.submitSubscription)||void 0===i||i.unsubscribe(),null===(r=this.deleteSubscription)||void 0===r||r.unsubscribe(),null===(n=this.applyExitSubscription)||void 0===n||n.unsubscribe(),null===(l=this.exitSubscription)||void 0===l||l.unsubscribe()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(O.x),t.Y36(D.uw),t.Y36(A.t2),t.Y36(c.sK),t.Y36(b.F0),t.Y36(V.F),t.Y36(y.yh))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-list"]],decls:6,vars:10,consts:[[3,"title_fiter","title","dataSource","pagedata","dataFilter","t","toParentOk","toParentCal"],["table-top",""],["mat-flat-button","","color","primary",3,"routerLink"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",1,"c-hover",3,"disabled","click"],["mat-menu-item","",1,"c-hover",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"app-udpn-list",0),t.NdJ("toParentOk",function(n){return i.fetchAll(n)})("toParentCal",function(){return i.init()}),t.ynx(1,1),t.TgZ(2,"button",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.BQk(),t.YNc(5,k,26,28,"ng-template"),t.qZA()),2&e&&(t.Q6J("title_fiter",i.app_title_fiter)("title",i.app_title)("dataSource",i.dataSource)("pagedata",i.pagedata)("dataFilter",i.dataFilter)("t",i.total),t.xp6(2),t.Q6J("routerLink",i.app_path_add),t.xp6(1),t.Oqu(t.lcZ(4,8,i.app_create)))},directives:[Q.p,S.lW,b.rH,L.p6,Y.Hw,L.VK,L.OP],pipes:[c.X$],styles:[""]}),a})()},{path:"info",component:f},{path:"add",component:m},{path:"edit",component:m}];let j=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[b.Bz.forChild(_)],b.Bz]}),a})();var G=o(3767),z=o(8554),$=o(7322),H=o(4975),B=o(1237),X=o(6556),K=o(2201),W=o(8530),tt=o(6867),et=o(1081),it=o(1694);let st=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[{provide:$.o2,useValue:{appearance:"outline"}},{provide:Z.l7,multi:!0,useFactory:X.R,deps:[c.sK]}],imports:[[G.m,v.ez,z.o,j,Z.X0.forRoot({types:[{name:"cInput",component:H.N},{name:"keyValue",component:W.n},{name:"cbutton",component:K.k},{name:"cimage",component:tt.j},{name:"Input",component:et.h},{name:"upload",component:it.u}],wrappers:[{name:"panel",component:B.X}]})]]}),a})()}}]);