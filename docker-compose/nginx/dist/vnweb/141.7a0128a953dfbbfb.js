"use strict";(self.webpackChunkudpn_tem2=self.webpackChunkudpn_tem2||[]).push([[141],{2201:(D,M,r)=>{r.d(M,{k:()=>A});var C=r(8776),s=r(5e3),h=r(2290),b=r(7423),y=r(5245),p=r(9772),Z=r(1062);const m=["upFile"];let A=(()=>{class u extends C.fS{constructor(d){super(),this.toastr=d}uploadFile(d){"text/plain"===d.target.files[0].type?new Promise((v,_)=>{const g=new FileReader;g.onload=()=>{g.result?v(g.result.toString()):this.showErrors("file content is empty!")},g.readAsText(d.target.files[0],"utf-8")}).then(v=>{if(this.fileDom.nativeElement.value="",this.isJSON(v)){this.model.Document=v;var _=JSON.parse(v),g=JSON.stringify(_,void 0,4);this.form.get("udpnDidDocument").setValue(g)}else this.showErrors("File format error!")}):this.showErrors("File format error!")}isJSON(d){if("string"==typeof d){const F=JSON.parse(d);return!("object"!=typeof F||!F)}return!1}showErrors(d){this.toastr.error(d,"error",{positionClass:"toast-bottom-center",progressBar:!0,progressAnimation:"decreasing"})}}return u.\u0275fac=function(d){return new(d||u)(s.Y36(h._W))},u.\u0275cmp=s.Xpm({type:u,selectors:[["formly-button"]],viewQuery:function(d,F){if(1&d&&s.Gf(m,5),2&d){let v;s.iGM(v=s.CRH())&&(F.fileDom=v.first)}},features:[s.qOj],decls:8,vars:6,consts:[["mat-stroked-button","","color","primary","type","button",1,"-mt-4",2,"width","100px","height","40px",3,"click"],["type","file","accept",".txt","hidden","",3,"change"],["upFile",""],["matTooltipPosition","right",2,"color","#333333ad","font-size","20px",3,"matTooltip"]],template:function(d,F){if(1&d){const v=s.EpF();s.TgZ(0,"button",0),s.NdJ("click",function(){return s.CHM(v),s.MAs(4).click()}),s._uU(1),s.ALo(2,"translate"),s.qZA(),s.TgZ(3,"input",1,2),s.NdJ("change",function(g){return F.uploadFile(g)}),s.qZA(),s.TgZ(5,"mat-icon",3),s.ALo(6,"translate"),s._uU(7,"help"),s.qZA()}2&d&&(s.xp6(1),s.Oqu(s.lcZ(2,2,"browse")),s.xp6(4),s.Q6J("matTooltip",s.lcZ(6,4,"onlineHelp.node")))},directives:[b.lW,y.Hw,p.gM],pipes:[Z.X$],encapsulation:2}),u})()},1237:(D,M,r)=>{r.d(M,{X:()=>Z});var C=r(8776),s=r(5e3),h=r(1062),b=r(3954),y=r(9808);function p(m,A){1&m&&(s.TgZ(0,"span",5),s._uU(1,"*"),s.qZA())}let Z=(()=>{class m extends C.n2{constructor(u){super(),this.translate=u}}return m.\u0275fac=function(u){return new(u||m)(s.Y36(h.sK))},m.\u0275cmp=s.Xpm({type:m,selectors:[["formly-wrapper-panel"]],features:[s.qOj],decls:9,vars:5,consts:[["cols","4","gutterSize","0.8rem",3,"rowHeight"],[1,"font-sans","text-sm","-mt-4","whitespace-nowrap","text-right","font-bold"],["class","text-red-600",4,"ngIf"],["colspan","3"],["fieldComponent",""],[1,"text-red-600"]],template:function(u,e){1&u&&(s.TgZ(0,"mat-grid-list",0),s.TgZ(1,"mat-grid-tile"),s.TgZ(2,"div",1),s.YNc(3,p,2,0,"span",2),s.ALo(4,"translate"),s._uU(5),s.qZA(),s.qZA(),s.TgZ(6,"mat-grid-tile",3),s.GkF(7,null,4),s.qZA(),s.qZA()),2&u&&(s.Q6J("rowHeight",e.to.height||"70px"),s.xp6(3),s.Q6J("ngIf",e.to.required&&e.to.label!==s.lcZ(4,3,"unionist.public.nodeCode")),s.xp6(2),s.hij("",e.to.label," "))},directives:[b.Il,b.DX,y.O5],pipes:[h.X$],encapsulation:2}),m})()},6556:(D,M,r)=>{function C(s){return{validationMessages:[{name:"required",message:(h,b)=>s.stream("formly.required",{label:`${b.templateOptions.label||b.templateOptions.labels}`})}]}}r.d(M,{R:()=>C})},6141:(D,M,r)=>{r.r(M),r.d(M,{ServiceFeeModule:()=>Ce});var C=r(9808),s=r(3767),h=r(5089),b=r(655),y=r(8746),p=r(3075),Z=r(6661),m=r(1422),A=r(4842),u=r(2192),e=r(5e3),d=r(8966),F=r(6596),v=r(2290),_=r(1062),g=r(72),E=r(827),N=r(7322),B=r(8833),x=r(2075),Q=r(4107),$=r(508),w=r(5245),Y=r(9772),P=r(7423),I=r(7226);function H(a,i){1&a&&(e.TgZ(0,"mat-error"),e.TgZ(1,"small"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"service-fee.required.serviceFeeTitle")))}function k(a,i){1&a&&(e.TgZ(0,"th",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"service-fee.public.currencyType")," "))}function j(a,i){if(1&a&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" ",t.currencyType," ")}}function W(a,i){1&a&&(e.TgZ(0,"th",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"service-fee.public.originalModel")," "))}function z(a,i){if(1&a&&(e.TgZ(0,"td",24),e._uU(1),e.ALo(2,"serviceFeeModel"),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.originalChainFeeModel)," ")}}function K(a,i){1&a&&(e.TgZ(0,"th",23),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"service-fee.public.originalFee"),""))}function X(a,i){if(1&a&&(e.TgZ(0,"td",24),e._uU(1),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.hij(" ",t.originalChainFixFee," ")}}function V(a,i){1&a&&(e.TgZ(0,"th",23),e.TgZ(1,"span",8),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&a&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"service-fee.public.chargingModel"),""))}function G(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"td",24),e.TgZ(1,"mat-form-field",25),e.TgZ(2,"mat-select",26),e.NdJ("selectionChange",function(o){const c=e.CHM(t).index;return e.oxw().onSelectChange(o,c)}),e.TgZ(3,"mat-option",27),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-option",28),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=i.$implicit;e.xp6(2),e.Q6J("value","3"===t.originalChainFeeModel?2===t.chainFeeModel?"2":"1":t.chainFeeModel.toString()),e.xp6(2),e.Oqu(e.lcZ(5,3,"chargingModel.fixedFee")),e.xp6(3),e.Oqu(e.lcZ(8,5,"chargingModel.ratio"))}}function ee(a,i){1&a&&(e.TgZ(0,"th",23),e.TgZ(1,"span",8),e._uU(2,"*"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"mat-icon",29),e.ALo(6,"translate"),e._uU(7,"help"),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"service-fee.public.serviceFee")," "),e.xp6(2),e.Q6J("matTooltip",e.lcZ(6,4,"onlineHelp.servcieFee")))}const O=function(){return{standalone:!0}};function te(a,i){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",30),e.TgZ(2,"input",31),e.NdJ("keypress",function(o){e.CHM(t);const l=e.oxw().$implicit,c=e.oxw();return c.clearNoNum(o,c.digits,l.currencyPrecision-1)})("ngModelChange",function(o){return e.CHM(t),e.oxw().$implicit.chainFixFee=o}),e.qZA(),e.qZA(),e.BQk()}if(2&a){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngModelOptions",e.DdM(2,O))("ngModel",t.chainFixFee)}}function ie(a,i){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"mat-form-field",32),e.TgZ(5,"input",33),e.NdJ("keypress",function(o){e.CHM(t);const l=e.oxw().$implicit,c=e.oxw();return c.clearNoNum(o,c.digits,l.currencyPrecision-1)})("ngModelChange",function(o){return e.CHM(t),e.oxw().$implicit.chainRatioFeeLeast=o}),e.qZA(),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.TgZ(8,"mat-form-field",32),e.TgZ(9,"input",33),e.NdJ("keypress",function(o){e.CHM(t);const l=e.oxw().$implicit,c=e.oxw();return c.clearNoNum(o,c.digits,l.currencyPrecision-1)})("ngModelChange",function(o){return e.CHM(t),e.oxw().$implicit.chainRatioFeeMost=o}),e.qZA(),e.qZA(),e._uU(10," , "),e.TgZ(11,"span",8),e._uU(12,"*"),e.qZA(),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"mat-form-field",32),e.TgZ(16,"input",33),e.NdJ("keypress",function(o){return e.CHM(t),e.oxw(2).clearNoNum(o,9,6)})("ngModelChange",function(o){return e.CHM(t),e.oxw().$implicit.chainRatioFee=o}),e.qZA(),e.qZA(),e._uU(17," % "),e.qZA(),e.BQk()}if(2&a){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,9,"service-fee.public.least")," "),e.xp6(3),e.Q6J("ngModelOptions",e.DdM(15,O))("ngModel",t.chainRatioFeeLeast),e.xp6(1),e.hij(" ",e.lcZ(7,11,"service-fee.public.most")," "),e.xp6(3),e.Q6J("ngModelOptions",e.DdM(16,O))("ngModel",t.chainRatioFeeMost),e.xp6(4),e.hij(" ",e.lcZ(14,13,"service-fee.public.normal")," "),e.xp6(3),e.Q6J("ngModelOptions",e.DdM(17,O))("ngModel",t.chainRatioFee)}}function ne(a,i){if(1&a&&(e.TgZ(0,"td",24),e.YNc(1,te,3,3,"ng-container",11),e.YNc(2,ie,18,18,"ng-container",11),e.TgZ(3,"p",8),e._uU(4),e.qZA(),e.qZA()),2&a){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1===t.chainFeeModel),e.xp6(1),e.Q6J("ngIf",2===t.chainFeeModel),e.xp6(2),e.hij(" ","The accuracy is "+t.currencyPrecision+" !"," ")}}function ae(a,i){1&a&&e._UZ(0,"tr",34)}function oe(a,i){1&a&&e._UZ(0,"tr",35)}const re=function(a){return{"pointer-events-none":a}};class T{constructor(i,t,n,o,l,c,f,J,be){this.dialog=i,this.formBuilder=t,this.serviceFeeService=n,this.location=o,this.toastr=l,this.route=c,this.translate=f,this.spinner=J,this.store=be,this.displayedColumns=["Currency Type","Original Charging Model","Original Service Fee","Charging Model","Service Fee"],this.dataSource=[],this.updateData={serviceFeeName:"",serviceFeeCode:"",serviceFeeSwap:"",serviceFeeTrans:"",serviceFeeCreatorName:"",createDate:"",serviceFeeStatus:1,serviceFeeCreatorCode:""},this.details={chainFixFee:0,chainRatioFee:0,chainRatioFeeLeast:0,chainRatioFeeMost:0,originalChainFixFee:0,originalChainRatioFeeLeast:0,originalChainRatioFeeMost:0,originalChainRatioFee:0,currencyType:"",chainFeeModel:0,originalChainFeeModel:0,currencyPrecision:0},this.type="add",this.tempStatus=!0,this.progressMode="determinate",this.ifSubmit=!0,this.createDataList={},this.editDataList={}}ngOnInit(){this.initFormBuilder(),this.paramsSubscription=this.params$.subscribe(i=>{"{}"!==JSON.stringify(i.param)&&(this.type="edit",this.infoData(i.param.serviceFeeCode))}),"add"===this.type&&(this.getNodeNumber(),this.createDetail())}infoData(i){this.serviceFeeService.info({serviceFeeCode:i}).subscribe(t=>{0===t.code&&(this.updateData=t.data,this.servicefeeForm.get("serviceFeeName").setValue(t.data.serviceFeeName),this.servicefeeForm.get("serviceFeeCode").setValue(t.data.serviceFeeCode.toString()),this.dataSource=this.processData(t.data.serviceFeeDetails))})}getNodeNumber(){this.getNodeNumberSubscription=this.serviceFeeService.getNodeCode({}).subscribe(i=>{0===i.code&&this.servicefeeForm.get("serviceFeeCode").setValue(i.data)})}createDetail(){this.createDetailSubscription=this.serviceFeeService.createDetail({}).subscribe(i=>{0===i.code&&(this.dataSource=this.processData(i.data))})}onSelectChange(i,t){this.dataSource[t].chainFeeModel=Number(i.value)}processData(i){return i.map(t=>{"add"===this.type?(t.chainFixFee=t.originalChainFixFee,t.chainRatioFee=t.originalChainRatioFee,t.chainRatioFeeLeast=t.originalChainRatioFeeLeast,t.chainRatioFeeMost=t.originalChainRatioFeeMost,t.chainFeeModel=t.originalChainFeeModel,2===t.originalChainFeeModel?t.originalChainFixFee=`At least : ${t.originalChainRatioFeeLeast}, At Most : ${t.originalChainRatioFeeMost}, Normal : ${t.originalChainRatioFee}%`:null===t.originalChainFeeModel&&(t.originalChainFeeModel="3",t.originalChainFixFee="--",t.chainFeeModel=1)):null===t.originalChainFeeModel?(t.originalChainFeeModel="3",t.originalChainFixFee="--"):2===t.originalChainFeeModel&&(t.originalChainFixFee=`At least :${t.originalChainRatioFeeLeast}, At Most :${t.originalChainRatioFeeMost}, Normal : ${t.originalChainRatioFee}%`)}),i}initFormBuilder(){this.servicefeeForm=this.formBuilder.group({serviceFeeName:["",[p.kI.required]],serviceFeeCode:new p.NI({value:""},p.kI.required)})}toastrShow(i,t,n=!0){return!i&&void 0!==i&&0!==i&&(n?(this.toastr.error(`${t} is required`,"error",{positionClass:"toast-bottom-center",progressBar:!0,progressAnimation:"decreasing"}),!0):t)}checkTable(){const i=document.getElementsByClassName("table-container");for(let t=0;t<this.dataSource.length;t++){const n=this.dataSource[t];if("3"===n.originalChainFeeModel){if(1===n.chainFeeModel&&this.toastrShow(n.chainFixFee,"Service Fee"))return i[0].childNodes[1].childNodes[t].classList.add("bg-red-50"),!1;if(2===n.chainFeeModel){let o="";const l=[{name:n.chainRatioFee,str:"Normal"}];for(let c=0;c<l.length;c++){const f=l[c];o+="string"==typeof this.toastrShow(f.name,f.str,!1)?this.toastrShow(f.name,f.str,!1)+",":""}if(o.length>0){i[0].childNodes[1].childNodes[t].classList.add("bg-red-50");const f=o.substr(0,o.length-1);return this.toastr.error(`${f} is required`,"error",{positionClass:"toast-bottom-center",progressBar:!0,progressAnimation:"decreasing"}),!1}if(Number(n.chainRatioFeeLeast)>Number(n.chainRatioFeeMost))return this.toastr.error("least must be less than Most","error",{positionClass:"toast-bottom-center",progressBar:!0,progressAnimation:"decreasing"}),!1}}}return!0}submit(){if(!this.checkTable())return;this.closeBcg(),this.spinner.show();let i={};const t=[];if(this.dataSource.map(n=>{t.push({chainFixFee:2===n.chainFeeModel?null:n.chainFixFee,chainRatioFee:1===n.chainFeeModel?null:n.chainRatioFee,chainRatioFeeLeast:1===n.chainFeeModel?null:n.chainRatioFeeLeast,chainRatioFeeMost:1===n.chainFeeModel?null:n.chainRatioFeeMost,chainFeeModel:n.chainFeeModel||"",currencyType:n.currencyType||""})}),"add"===this.type)i=JSON.parse(JSON.stringify(this.servicefeeForm.value)),i.array=t,this.servicefeeForm.value.serviceFeeCode=this.servicefeeForm.get("serviceFeeCode").value,this.addSubscription=this.serviceFeeService.add(i).pipe((0,y.x)(()=>this.spinner.hide())).subscribe(n=>{0!==n.code||this.dialog.open(m.h,{panelClass:"dialog-container-custom",data:{title:"Success",body:"Service Fee added successfully!"}}).afterClosed().subscribe(l=>{l&&this.location.back()})});else{let n={};n=this.servicefeeForm.value,n.createDate=this.updateData.createDate,n.serviceFeeStatus=this.updateData.serviceFeeStatus,n.serviceFeeCreatorName=this.updateData.serviceFeeCreatorName,n.serviceFeeCreatorCode=this.updateData.serviceFeeCreatorCode,i=JSON.parse(JSON.stringify(n)),i.array=t,this.editSubscription=this.serviceFeeService.edit(i).pipe((0,y.x)(()=>this.spinner.hide())).subscribe(o=>{0!==o.code||this.dialog.open(m.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Edit successfully!"}}).afterClosed().subscribe(c=>{c&&this.location.back()})})}}closeBcg(){const i=document.getElementsByClassName("table-container");[].slice.call(i[0].childNodes[1].children).forEach(n=>{n.getAttribute("class").indexOf("bg-red-50")>-1&&n.classList.remove("bg-red-50")})}clearNoNum(i,t,n){var o=i.target.value,l=i.key;if(i=i.target,o<0)i.value="";else if("e"!==l){var c=o.lastIndexOf(".");if(c<0){if(o.length<=t)return;o.length>t&&(i.value=o.substring(0,t))}else c==o.indexOf(".")?c>t?o.length>t&&(i.value=o.substring(0,t)):o.length-c-1>n&&(i.value=o.substring(0,c+n+1)):i.value=""}else i.value=""}ngOnDestroy(){var i,t,n,o,l,c;this.store.dispatch(new u.A({})),null===(i=this.paramsSubscription)||void 0===i||i.unsubscribe(),null===(t=this.getNodeNumberSubscription)||void 0===t||t.unsubscribe(),null===(n=this.createDetailSubscription)||void 0===n||n.unsubscribe(),null===(o=this.routerSubscription)||void 0===o||o.unsubscribe(),null===(l=this.addSubscription)||void 0===l||l.unsubscribe(),null===(c=this.editSubscription)||void 0===c||c.unsubscribe()}}T.\u0275fac=function(i){return new(i||T)(e.Y36(d.uw),e.Y36(p.qu),e.Y36(F.E),e.Y36(C.Ye),e.Y36(v._W),e.Y36(h.gz),e.Y36(_.sK),e.Y36(g.t2),e.Y36(Z.yh))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-add"]],decls:60,vars:45,consts:[[1,"w-full","bg-white","shadow-sm","rounded-md","border","border-gray-100","border-solid",3,"ngClass"],[1,"flex","flex-row","items-center","h-14","border-b","border-gray-200","border-solid","justify-between","pl-6","pr-6"],[1,"font-sans","text-sm","font-bold","text-gray-700"],[1,"p-12","relative"],["bdColor","rgba(255,255,255,0.4)","size","default","color","#326594","type","square-jelly-box",3,"fullScreen"],[3,"formGroup"],["tail",""],[1,"text-right","font-sans","text-sm","font-bold","pr-3","w-1/5"],[1,"text-red-600"],["appearance","outline",1,"w-full"],["matInput","","onkeyup","this.value=this.value.replace(/[\\u4E00-\\u9FA5]/g,'')","formControlName","serviceFeeName","required","","maxlength","50","placeholder","Service Fee Title"],[4,"ngIf"],["colspan","4",1,"fee"],["mat-table","",1,"w-full","table-container",3,"dataSource"],[3,"matColumnDef"],["mat-header-cell","","class","pr-2",4,"matHeaderCellDef"],["mat-cell","","class","pr-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"h-32"],["colspan","4",1,"text-right"],["mat-stroked-button","","color","primary","type","button","routerLink","../"],["mat-flat-button","","color","primary",1,"!ml-8",3,"disabled","click"],["mat-header-cell","",1,"pr-2"],["mat-cell","",1,"pr-2"],["appearance","outline"],[3,"value","selectionChange"],["value","1"],["value","2"],["matTooltipPosition","right",2,"color","#333333ad","font-size","16px",3,"matTooltip"],[1,"example-full-width"],["matInput","","placeholder","Service Fee","type","number","autocomplete","off","onafterpaste","this.value=this.value.replace(/[^\\d.]/g,'').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')",3,"ngModelOptions","ngModel","keypress","ngModelChange"],[1,"w-12"],["matInput","","type","number","autocomplete","off","onafterpaste","this.value=this.value.replace(/[^\\d.]/g,'').replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3')",3,"ngModelOptions","ngModel","keypress","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"ngx-spinner",4),e.TgZ(8,"form",5),e.TgZ(9,"app-udpn-info"),e.ynx(10,6),e.TgZ(11,"tr"),e.TgZ(12,"td",7),e.TgZ(13,"span",8),e._uU(14,"*"),e.qZA(),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"td"),e.TgZ(18,"mat-form-field",9),e._UZ(19,"input",10),e.YNc(20,H,4,3,"mat-error",11),e.qZA(),e.qZA(),e.TgZ(21,"td",7),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.qZA(),e.TgZ(26,"tr"),e.TgZ(27,"td",12),e.TgZ(28,"table",13),e.ynx(29,14),e.ALo(30,"translate"),e.YNc(31,k,3,3,"th",15),e.YNc(32,j,2,1,"td",16),e.BQk(),e.ynx(33,14),e.ALo(34,"translate"),e.YNc(35,W,3,3,"th",15),e.YNc(36,z,3,3,"td",16),e.BQk(),e.ynx(37,14),e.ALo(38,"translate"),e.YNc(39,K,3,3,"th",15),e.YNc(40,X,2,1,"td",16),e.BQk(),e.ynx(41,14),e.ALo(42,"translate"),e.YNc(43,V,5,3,"th",15),e.YNc(44,G,9,7,"td",16),e.BQk(),e.ynx(45,14),e.ALo(46,"translate"),e.YNc(47,ee,8,6,"th",15),e.YNc(48,ne,5,3,"td",16),e.BQk(),e.YNc(49,ae,1,0,"tr",17),e.YNc(50,oe,1,0,"tr",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"tr",19),e.TgZ(52,"td",20),e.TgZ(53,"button",21),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"button",22),e.NdJ("click",function(){return t.submit()}),e._uU(57),e.ALo(58,"translate"),e.ALo(59,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.Q6J("ngClass",e.VKq(43,re,"indeterminate"===t.progressMode)),e.xp6(3),e.Oqu("add"===t.type?e.lcZ(4,19,"service-fee.list.create"):e.lcZ(5,21,"edit")),e.xp6(4),e.Q6J("fullScreen",!1),e.xp6(1),e.Q6J("formGroup",t.servicefeeForm),e.xp6(7),e.Oqu(e.lcZ(16,23,"service-fee.public.serviceFeeTitle")),e.xp6(5),e.Q6J("ngIf",t.servicefeeForm.controls.serviceFeeName.hasError("required")),e.xp6(2),e.Oqu(e.lcZ(23,25,"service-fee.public.serviceFeeCode")),e.xp6(3),e.hij(" ",t.servicefeeForm.get("serviceFeeCode").value," "),e.xp6(3),e.Q6J("dataSource",t.dataSource),e.xp6(1),e.Q6J("matColumnDef",e.lcZ(30,27,"service-fee.public.currencyType")),e.xp6(4),e.Q6J("matColumnDef",e.lcZ(34,29,"service-fee.public.originalModel")),e.xp6(4),e.Q6J("matColumnDef",e.lcZ(38,31,"service-fee.public.originalFee")),e.xp6(4),e.Q6J("matColumnDef",e.lcZ(42,33,"service-fee.public.chargingModel")),e.xp6(4),e.Q6J("matColumnDef",e.lcZ(46,35,"service-fee.public.serviceFee")),e.xp6(4),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(4),e.Oqu(e.lcZ(55,37,"back")),e.xp6(2),e.Q6J("disabled","indeterminate"===t.progressMode||t.servicefeeForm.invalid),e.xp6(1),e.hij(" ","add"===t.type?e.lcZ(58,39,"save"):e.lcZ(59,41,"edit")," "))},directives:[C.mk,g.Ro,p._Y,p.JL,p.sg,E.m,N.KE,B.Nt,p.Fj,p.JJ,p.u,p.Q7,p.nD,C.O5,N.TO,x.BZ,x.w1,x.fO,x.ge,x.Dz,x.ev,Q.gD,$.ey,w.Hw,Y.gM,p.wV,p.On,x.as,x.XQ,x.nj,x.Gk,P.lW,h.rH],pipes:[_.X$,I.x],styles:["mat-form-field.mat-form-field[_ngcontent-%COMP%]{font-size:12px}.create[_ngcontent-%COMP%]     .mat-grid-tile-content{justify-content:flex-start!important}.create[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%], .create[_ngcontent-%COMP%]   .mat-flat-button[_ngcontent-%COMP%]{width:100px;height:40px}input[type=number][_ngcontent-%COMP%]{--tw-ring-inset: none}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none!important}.table-container[_ngcontent-%COMP%]{background-color:transparent!important}.table-container[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]{background:#D2EEFF}.table-container[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{color:#466278!important;font-weight:600!important}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px}.table-container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px;border-bottom-right-radius:8px}.fee[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.fee[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-underline{bottom:.25em}.fee[_ngcontent-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:1.5em}.input-color[_ngcontent-%COMP%]{background-color:#eee;width:80px;border-radius:4px}.title[_ngcontent-%COMP%]{margin-left:270px!important}.detail-table[_ngcontent-%COMP%]{margin:15px 0 40px 18px!important}.container[_ngcontent-%COMP%]{background-color:transparent!important;width:1000px!important;border:2px solid #fff!important;border-radius:8px!important;font-size:12px!important;font-weight:500!important}.container[_ngcontent-%COMP%]   .container-head[_ngcontent-%COMP%]{background:#D2EEFF;color:#466278!important;height:56px!important}.container[_ngcontent-%COMP%]   .container-body[_ngcontent-%COMP%]{font-size:12px!important;height:50px!important;padding-left:5px!important}.container[_ngcontent-%COMP%]   .container-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:14px!important;font-weight:400!important;border-bottom:1px solid #e6e1e1!important}.container[_ngcontent-%COMP%]   .container-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{padding-left:25px!important;font-size:14px!important;height:47px!important}.container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]:first-child{border-top-left-radius:8px;border-bottom-left-radius:8px;padding-left:25px!important}.container[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   th[_ngcontent-%COMP%]:last-child{border-top-right-radius:8px}.container[_ngcontent-%COMP%]   .last-child[_ngcontent-%COMP%]{border-bottom-right-radius:8px!important}"]}),(0,b.gn)([(0,Z.Ph)(A.s.param)],T.prototype,"params$",void 0);var se=r(2214),le=r(5144);class S{constructor(i,t,n,o){this.spinner=i,this.translate=t,this.serviceFeeService=n,this.store=o,this.serviceFeeList={},this.dataShow=[],this.pagedata=[{tag:"service-fee.public.currencyType",colunm:"currencyType",colunmData:"currencyType"},{tag:"service-fee.public.originalModel",colunm:"originalChainFeeModel",colunmData:"originalChainFeeModel",pip:"serviceFeeModel"},{tag:"service-fee.public.originalFee",colunm:"originalServiceFee",colunmData:"originalServiceFee"},{tag:"service-fee.public.chargingModel",colunm:"chainFeeModel",colunmData:"chainFeeModel",pip:"serviceFeeModel"},{tag:"service-fee.public.serviceFee",colunm:"serviceFee",colunmData:"serviceFee"}]}ngOnInit(){this.paramsSubscription=this.params$.subscribe(i=>{"{}"!==JSON.stringify(i.param)&&this.infoData(i.param.serviceFeeCode)})}infoData(i){this.spinner.show(),this.infoSubscription=this.serviceFeeService.info({serviceFeeCode:i}).pipe((0,y.x)(()=>this.spinner.hide())).subscribe(t=>{this.serviceFeeList=t.data,this.dataSource=this.serviceFeeList.serviceFeeDetails,this.dataShow=[[{label:"service-fee.public.serviceFeeTitle",value:t.data.serviceFeeName},{label:"service-fee.public.serviceFeeCode",value:t.data.serviceFeeCode}],[{label:"service-fee.public.fromVN",value:t.data.serviceFeeCreatorName},{label:"service-fee.public.creation",value:t.data.createDate,type:"pip",pip:"date"}],[{label:"service-fee.public.status",value:t.data.serviceFeeStatus,colspan:3,type:"pip",pip:"serviceListStatus"}]]})}ngOnDestroy(){var i,t;this.store.dispatch(new u.A({})),null===(i=this.paramsSubscription)||void 0===i||i.unsubscribe(),null===(t=this.infoSubscription)||void 0===t||t.unsubscribe()}}S.\u0275fac=function(i){return new(i||S)(e.Y36(g.t2),e.Y36(_.sK),e.Y36(F.E),e.Y36(Z.yh))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-info"]],decls:15,vars:9,consts:[["title","detail"],[3,"dataShow"],["tail",""],[1,"h-36"],[1,"text-right","font-sans","text-sm","font-bold","pr-3","w-1/5"],["colspan","3"],[3,"dataSource","pagedata"],[1,"h-16"],["colspan","4",1,"text-right"],["mat-stroked-button","","color","primary","type","button","routerLink","../"]],template:function(i,t){1&i&&(e.TgZ(0,"app-udpn-card",0),e.TgZ(1,"app-udpn-info",1),e.ynx(2,2),e.TgZ(3,"tr",3),e.TgZ(4,"td",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"td",5),e._UZ(8,"app-udpn-table",6),e.qZA(),e.qZA(),e.BQk(),e.ynx(9,2),e.TgZ(10,"tr",7),e.TgZ(11,"td",8),e.TgZ(12,"button",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("dataShow",t.dataShow),e.xp6(4),e.Oqu(e.lcZ(6,5,"service-fee.public.serviceFee")),e.xp6(3),e.Q6J("dataSource",t.dataSource)("pagedata",t.pagedata),e.xp6(5),e.Oqu(e.lcZ(14,7,"back")))},directives:[se.t,E.m,le.$,P.lW,h.rH],pipes:[_.X$],styles:[""]}),(0,b.gn)([(0,Z.Ph)(A.s.param)],S.prototype,"params$",void 0);var L=r(9247),U=r(5001),ce=r(6852),de=r(7464),R=r(1451);function pe(a,i){if(1&a){const t=e.EpF();e.TgZ(0,"button",3),e.TgZ(1,"mat-icon"),e._uU(2,"more_vert"),e.qZA(),e.qZA(),e.TgZ(3,"mat-menu",null,4),e.TgZ(5,"button",5),e.NdJ("click",function(){const l=e.CHM(t).data;return e.oxw().onSubmit(l.serviceFeeCode)}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){const l=e.CHM(t).data,c=e.oxw();return c.onJump(c.app_path_edit,l.serviceFeeCode,l.serviceFeeName)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",6),e.NdJ("click",function(){const l=e.CHM(t).data,c=e.oxw();return c.onJump(c.app_path_info,l.serviceFeeCode,l.serviceFeeName)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",5),e.NdJ("click",function(){const l=e.CHM(t).data;return e.oxw().onDelete(l.serviceFeeCode)}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA()}if(2&a){const t=i.data,n=e.MAs(4);e.Q6J("matMenuTriggerFor",n),e.xp6(5),e.Q6J("disabled",0!==t.serviceFeeStatus||!0!==t.canSubmit),e.xp6(1),e.Oqu(e.lcZ(7,8,"submit")),e.xp6(2),e.Q6J("disabled",0!==t.serviceFeeStatus),e.xp6(1),e.Oqu(e.lcZ(10,10,"edit")),e.xp6(3),e.Oqu(e.lcZ(13,12,"detail")),e.xp6(2),e.Q6J("disabled",0!==t.serviceFeeStatus),e.xp6(1),e.Oqu(e.lcZ(16,14,"delete"))}}const ue=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class a{constructor(t,n,o,l,c,f,J){this.serviceFeeService=t,this.spinner=n,this.dialog=o,this.translateService=l,this.router=c,this.sharedService=f,this.store=J,this.app_title="service-fee.list.title",this.app_create="service-fee.list.create",this.app_title_fiter="service-fee.list.fiter",this.app_path_add=(new L.w).serviceFeeAdd,this.app_path_edit=(new L.w).serviceFeeEdit,this.app_path_info=(new L.w).serviceFeeInfo,this.snapFilter=this.sharedService.getSnapFilter||{},this.isCanCreate=!0,this.pagedata=[{tag:"service-fee.public.serviceFeeTitle",colunm:"serviceFeeName",colunmData:"serviceFeeName"},{tag:"service-fee.public.serviceFeeCode",colunm:"serviceFeeCode",colunmData:"serviceFeeCode"},{tag:"service-fee.public.fromVN",colunm:"serviceFeeCreatorName",colunmData:"serviceFeeCreatorName"},{tag:"service-fee.public.creation",colunm:"createDate",colunmData:"createDate",pip:"date"},{tag:"service-fee.public.status",colunm:"serviceFeeStatus",colunmData:"serviceFeeStatus",pip:"serviceListStatus"},{tag:"service-fee.list.action",colunm:"Action"}],this.dataFilter=[{name:"serviceFeeName",tag:"service-fee.public.serviceFeeTitle",type:"input",maxLen:24},{name:"serviceFeeCode",tag:"service-fee.public.serviceFeeCode",type:"input",maxLen:24},{name:"createTime",tag:"service-fee.public.creation",type:"rangDate",startName:"startDate",endName:"endDate"},{name:"serviceFeeStatus",tag:"service-fee.public.status",type:"select",option:[{label:"serviceFeeStatus.all",val:""},{label:"serviceFeeStatus.init",val:0},{label:"serviceFeeStatus.voting",val:1},{label:"serviceFeeStatus.approved",val:2},{label:"serviceFeeStatus.rejected",val:3},{label:"serviceFeeStatus.invalid",val:4}]}]}ngOnInit(){this.loadService(this.snapFilter),this.isCreateServiceFee()}isCreateServiceFee(){this.isCreateSubscription=this.serviceFeeService.isCreate({}).subscribe(t=>{this.isCanCreate=t.data})}loadService(t){this.subscription=this.serviceFeeService.list(t).subscribe(n=>{this.dataSource=n.data,this.total=n.resultPageInfo.total})}fetchAll(t){if(t.hasOwnProperty("type")&&"search"===t.type)return t.data.inPage={pageSize:10,pageNum:1},this.snapFilter=Object.assign(Object.assign({},this.snapFilter),t.data),void this.loadService(this.snapFilter);this.snapFilter=Object.assign(Object.assign({},this.snapFilter),t),this.loadService(this.snapFilter)}init(){this.snapFilter={},this.loadService(this.snapFilter)}onSubmit(t){this.dialog.open(U.$,{panelClass:"dialog-container-custom",data:{title:"Submit",body:"Are you sure you want to submit this service fee ?"}}).afterClosed().subscribe(o=>{o&&(this.spinner.show(),this.submitSubscription=this.serviceFeeService.submit({serviceFeeCode:t}).pipe((0,y.x)(()=>this.spinner.hide())).subscribe(l=>{0!==l.code||this.dialog.open(m.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Submit successfully!"}}).afterClosed().subscribe(()=>{this.init()})}))})}onDelete(t){this.dialog.open(U.$,{panelClass:"dialog-container-custom",data:{title:"Delete",body:"Are you sure you want to delete this service fee ?"}}).afterClosed().subscribe(o=>{o&&(this.deleteSubscription=this.serviceFeeService.delete({serviceFeeCode:t}).subscribe(l=>{0!==l.code||this.dialog.open(m.h,{panelClass:"dialog-container-custom",data:{title:"success",body:"Delete successfully!"}}).afterClosed().subscribe(()=>{this.init(),this.isCreateServiceFee()})}))})}onJump(t,n,o){this.store.dispatch(new u.A({serviceFeeCode:n,serviceFeeName:o})).subscribe(l=>{this.router.navigate([t])})}ngOnDestroy(){var t,n,o,l;null===(t=this.subscription)||void 0===t||t.unsubscribe(),null===(n=this.submitSubscription)||void 0===n||n.unsubscribe(),null===(o=this.deleteSubscription)||void 0===o||o.unsubscribe(),null===(l=this.isCreateSubscription)||void 0===l||l.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(F.E),e.Y36(g.t2),e.Y36(d.uw),e.Y36(_.sK),e.Y36(h.F0),e.Y36(ce.F),e.Y36(Z.yh))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-list"]],decls:6,vars:11,consts:[[3,"title_fiter","title","dataSource","pagedata","dataFilter","t","toParentOk","toParentCal"],["table-top",""],["mat-flat-button","","color","primary",3,"disabled","routerLink"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",1,"c-hover",3,"disabled","click"],["mat-menu-item","",1,"c-hover",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-udpn-list",0),e.NdJ("toParentOk",function(l){return n.fetchAll(l)})("toParentCal",function(){return n.init()}),e.ynx(1,1),e.TgZ(2,"button",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.YNc(5,pe,17,16,"ng-template"),e.qZA()),2&t&&(e.Q6J("title_fiter",n.app_title_fiter)("title",n.app_title)("dataSource",n.dataSource)("pagedata",n.pagedata)("dataFilter",n.dataFilter)("t",n.total),e.xp6(2),e.Q6J("disabled",!0!==n.isCanCreate)("routerLink",n.app_path_add),e.xp6(1),e.Oqu(e.lcZ(4,9,n.app_create)))},directives:[de.p,P.lW,h.rH,R.p6,w.Hw,R.VK,R.OP],pipes:[_.X$],styles:[""]}),a})()},{path:"info",component:S},{path:"add",component:T},{path:"edit",component:T}];let me=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[h.Bz.forChild(ue)],h.Bz]}),a})();var q=r(8776),ge=r(8554),he=r(1237),fe=r(6556),ve=r(4975),_e=r(8009),Fe=r(2201);let Ce=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:N.o2,useValue:{appearance:"legacy"}},{provide:q.l7,multi:!0,useFactory:fe.R,deps:[_.sK]}],imports:[[s.m,C.ez,ge.o,me,q.X0.forRoot({types:[{name:"cInput",component:ve.N},{name:"cbutton",component:Fe.k},{name:"code",component:_e.x}],wrappers:[{name:"panel",component:he.X}]})]]}),a})()}}]);